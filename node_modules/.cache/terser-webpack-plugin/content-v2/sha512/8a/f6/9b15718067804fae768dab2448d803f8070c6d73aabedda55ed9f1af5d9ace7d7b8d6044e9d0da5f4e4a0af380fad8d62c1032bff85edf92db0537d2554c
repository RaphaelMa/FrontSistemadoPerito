{"code":"(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[44],{706:function(e,t,n){\"use strict\";var a=n(147),i=n(0),r=n.n(i),o=n(10),l=function(e){var t=e.divRef,n=Object(a.a)(e,[\"divRef\"]);return r.a.createElement(c,Object.assign({},n,{ref:t}),n.children)};l.displayName=\"TableContainer\",t.a=l;var c=o.c.div.withConfig({displayName:\"TableContainer__Container\",componentId:\"sc-1of4nmx-0\"})([\"display:flex;margin:0 -2rem 0 0;height:100%;\"])},707:function(e,t,n){\"use strict\";var a=n(0),i=n.n(a),r=n(10),o=function(e){return i.a.createElement(l,null,e.children)};o.displayName=\"ContainerList\",t.a=o;var l=r.c.div.withConfig({displayName:\"ContainerList__Container\",componentId:\"sc-1ematne-0\"})([\"height:100%;width:100%;padding:2rem;\"])},732:function(e,t,n){\"use strict\";var a=n(47),i=n(147),r=n(0),o=n.n(r),l=n(686),c=n(700),d=n(52),u=function(){return Object(d.b)({url:\"/listdata/filter=user\",method:\"GET\"},{manual:!1,useCache:!1})},s=function(e){var t=e.value_key,n=void 0===t?\"_id\":t,r=Object(i.a)(e,[\"value_key\"]),d=u(),s=Object(a.a)(d,1)[0],m=s.data,f=s.loading,p=m||[];return o.a.createElement(l.a,Object.assign({style:{width:\"100%\"},loading:f,placeholder:\"Pessoa\",showSearch:!0,getPopupContainer:function(e){return e.parentElement},filterOption:function(e,t){var n=Object(c.deburr)(e).toLowerCase();return Object(c.deburr)(null===t||void 0===t?void 0:t.children).toLowerCase().indexOf(n)>=0}},r),p.map((function(e){return o.a.createElement(l.a.Option,{key:e._id,value:e[n],name:e.name},e.name)})))};s.displayName=\"UserInput\";t.a=s},804:function(e,t,n){\"use strict\";var a=n(0),i=n.n(a),r=n(890),o=n(10),l=n(65),c=n.n(l),d=function(){return Object(a.useMemo)((function(){return[{title:\"Data\",dataIndex:\"createAt\",key:\"createAt\",align:\"center\",width:140,render:function(e){return e?c()(e).utc().format(\"DD/MM/YYYY HH:mm\"):null}},{title:\"A\\xe7\\xe3o\",dataIndex:\"action\",align:\"center\",render:function(e){return e.action_name}},{title:\"M\\xf3dulo\",dataIndex:\"module\",align:\"center\",render:function(e){return e.module_name}},{title:\"Usu\\xe1rio\",dataIndex:\"user\",ellipsis:!0,render:function(e){return e.user_name}},{title:\"Email\",dataIndex:\"user\",ellipsis:!0,render:function(e){return e.user_email}},{title:\"A\\xe7\\xf5es Realizadas\",dataIndex:\"record\",ellipsis:!0,render:function(e){var t,n;return null===(t=e[0])||void 0===t||null===(n=t.description)||void 0===n?void 0:n.replace(/\\\\n/,\"\")}}]}),[])},u=function(e){var t,n=e.data,a=e.loading,r=e.divRef,o=d(),l=((null===(t=r.current)||void 0===t?void 0:t.clientHeight)||0)-40;return i.a.createElement(s,{style:{flex:\"auto\",width:0},className:\"header-align-center\",columns:o,dataSource:n,loading:a,rowKey:\"_id\",tableLayout:\"fixed\",size:\"middle\",bordered:!0,pagination:{hideOnSinglePage:!0,showTotal:function(e){return\"\".concat(e,\" no total\")},showSizeChanger:!0,pageSizeOptions:[\"10\",\"20\",\"40\",\"50\",\"100\"]},scroll:{y:l},expandable:{rowExpandable:function(e){return e.record.length>0},expandedRowRender:function(e){return e.record.map((function(e,t){var n;return i.a.createElement(m,{key:t},null===(n=e.description)||void 0===n?void 0:n.split(/\\\\n|\\n/).map((function(t,n){return i.a.createElement(\"div\",{key:\"\".concat(n,\"-\").concat(e._id),className:0===n?\"first\":\"extra-info\"},t)})))}))}}})};u.displayName=\"HistoryTable\";t.a=Object(a.memo)(u);var s=Object(o.c)(r.a).withConfig({displayName:\"HistoryTable__StyledTable\",componentId:\"p2vbpg-0\"})([\".ant-table-container,.ant-spin-nested-loading,.ant-table,.ant-spin-container{height:calc(100% - 48px);}.ant-table-thead{th{text-align:center;}}.ant-table-body{height:100%;}\"]),m=o.c.p.withConfig({displayName:\"HistoryTable__HistoryItem\",componentId:\"p2vbpg-1\"})([\"&::before{content:'';display:inline-block;width:7px;height:7px;border-radius:50%;background-color:\",\";margin-right:5px;}div.first{display:inline;}div.extra-info{display:block;margin-left:20px;}\"],(function(e){return e.theme.colors.primary}))},921:function(e,t,n){\"use strict\";n.r(t);var a=n(242),i=n(48),r=n(47),o=n(0),l=n.n(o),c=n(700),d=n(707),u=n(804),s=n(52),m=function(){return Object(s.b)({url:\"/history\",method:\"GET\"},{manual:!0})},f=n(685),p=n(686),b=n(684),h=n(751),g=n(732),v=n(10),_=function(e){var t=e.modules,n=e.actions,a=e.handleChangeFilters;return l.a.createElement(O,{gutter:16},l.a.createElement(f.a,{span:5},l.a.createElement(j,{style:{width:\"100%\"},onChange:function(e){if(!e)return a(\"dates\",[]);var t=e[0],n=e[1];a(\"dates\",[null===t||void 0===t?void 0:t.format(\"YYYY-MM-DDT00:00\"),null===n||void 0===n?void 0:n.format(\"YYYY-MM-DDT23:59:59.999Z\")])},format:\"DD/MM/YYYY\"})),l.a.createElement(f.a,{span:3},l.a.createElement(p.a,{allowClear:!0,placeholder:\"A\\xe7\\xe3o\",onChange:function(e){a(\"action_id\",e)},style:{width:\"100%\"}},n.map((function(e){return l.a.createElement(p.a.Option,{key:e.action_id,value:e.action_id},e.action_name)})))),l.a.createElement(f.a,{span:3},l.a.createElement(p.a,{allowClear:!0,placeholder:\"M\\xf3dulo\",onChange:function(e){a(\"module_id\",e)},style:{width:\"100%\"}},t.map((function(e){return l.a.createElement(p.a.Option,{key:e.module_id,value:e.module_id},e.module_name)})))),l.a.createElement(f.a,{span:3},l.a.createElement(g.a,{allowClear:!0,placeholder:\"Usu\\xe1rio\",onChange:function(e){a(\"user_id\",e)}})))};_.displayName=\"Header\";var y=Object(o.memo)(_,c.isEqual),O=Object(v.c)(b.a).withConfig({displayName:\"Header__StyledRow\",componentId:\"a81b5j-0\"})([\"margin-bottom:3rem;\"]),j=Object(v.c)(h.a.RangePicker).withConfig({displayName:\"Header__RangePicker\",componentId:\"a81b5j-1\"})([\"width:100%;input{text-align:center;}\"]),w=n(706),E=function(){var e=Object(o.useState)({dates:[],user_id:null,action_id:null,module_id:null}),t=Object(r.a)(e,2),n=t[0],s=t[1],f=m(),p=Object(r.a)(f,2),b=p[0],h=b.loading,g=b.data,v=p[1];Object(o.useEffect)((function(){v()}),[]);var _=Object(o.useCallback)((function(e,t){var r=Object(i.a)({},n,Object(a.a)({},e,t));s(r)}),[n]),O=g||[],j=Object(o.useCallback)((function(){return O.filter((function(e){return!(n.dates[0]&&(!e.createAt||e.createAt<n.dates[0]))&&(!(n.dates[1]&&(!e.createAt||e.createAt>n.dates[1]))&&((!n.user_id||e.user.user_id===n.user_id)&&((!n.action_id||e.action.action_id===n.action_id)&&(!n.module_id||e.module.module_id===n.module_id))))}))}),[n.action_id,n.dates,n.module_id,n.user_id,O]),E=Object(o.useMemo)((function(){return O.map((function(e){return e.module}))}),[O]),C=Object(o.useMemo)((function(){return Object(c.uniqBy)(E,\"module_id\").filter((function(e){return e.module_id}))}),[E]),x=O.map((function(e){return e.action})),k=Object(o.useMemo)((function(){return Object(c.uniqBy)(x,\"action_id\").filter((function(e){return e.action_id}))}),[x]),Y=Object(o.useRef)(null);return l.a.createElement(d.a,null,l.a.createElement(y,{handleChangeFilters:_,modules:C,actions:k}),l.a.createElement(w.a,{divRef:Y},l.a.createElement(u.a,{data:j(),loading:h,divRef:Y})))};E.displayName=\"History\";t.default=Object(o.memo)(E)}}]);","extractedComments":[]}