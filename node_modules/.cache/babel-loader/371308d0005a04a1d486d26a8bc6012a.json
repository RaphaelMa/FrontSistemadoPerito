{"ast":null,"code":"import _regeneratorRuntime from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useMemo}from'react';import{theme}from'Styles/theme';import{useUserSelector}from'Redux/UserReducer';import{Button,message,Popconfirm,Switch}from'antd';import{DeleteOutlined,EditOutlined}from'@ant-design/icons';import useSaveTask from'Components/Modals/TaskModal/useSaveTask';import DateTag from'Pages/Tasks/Kanban/Task/DateTag';import messageError from'Utils/messageError';import moment from'moment';var useColumns=function useColumns(_ref){var handleDelete=_ref.handleDelete,handleEdit=_ref.handleEdit,updateTaskFinished=_ref.updateTaskFinished;var permissions=useUserSelector(function(state){return state.permissions;});var _useSaveTask=useSaveTask(),_useSaveTask2=_slicedToArray(_useSaveTask,2),saveTask=_useSaveTask2[0],loading=_useSaveTask2[1].loading;var handleChangeFinished=useCallback(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(value,task){var new_task,_yield$saveTask,_yield$saveTask$data,success,msg;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:new_task=_objectSpread({},task,{finished:value,finishedDate:value?moment().format('YYYY-MM-DD'):null});_context.prev=1;_context.next=4;return saveTask(new_task);case 4:_yield$saveTask=_context.sent;_yield$saveTask$data=_yield$saveTask.data;success=_yield$saveTask$data.success;msg=_yield$saveTask$data.message;if(!success){_context.next=11;break;}updateTaskFinished(new_task);return _context.abrupt(\"return\");case 11:message.error(msg);_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](1);messageError('202102071449');case 17:case\"end\":return _context.stop();}}},_callee,null,[[1,14]]);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}(),[saveTask,updateTaskFinished]);return useMemo(function(){var columns=[{title:'Coluna',dataIndex:'column_description',key:'column_description',ellipsis:true},{title:'Título',dataIndex:'title',key:'title',ellipsis:true},{title:'Responsável',dataIndex:'user_name',key:'user_name',width:250,ellipsis:true},{title:'Processo',dataIndex:'process_number',key:'process_number',align:'center',width:250,ellipsis:true},{title:'Data Entrega',dataIndex:'deliveryDateTask',key:'deliveryDateTask',align:'center',width:110,render:function render(_,task){return/*#__PURE__*/React.createElement(DateTag,{task:task,date_format:\"DD/MM/YYYY\"});}},{title:'Finalizado',dataIndex:'finished',key:'finished',align:'center',width:85,render:function render(finished){return finished?'Sim':'Não';}},{title:'Ações',key:'actions',align:'center',width:120,render:function render(task){return/*#__PURE__*/React.createElement(React.Fragment,null,(permissions===null||permissions===void 0?void 0:permissions.task.delete)&&/*#__PURE__*/React.createElement(Popconfirm,{title:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",null,\"A pessoa ser\\xE1 exclu\\xEDda de todos os processos em que esta atrelada.\"),/*#__PURE__*/React.createElement(\"div\",null,\"Deseja continuar?\")),okText:\"Sim\",cancelText:\"N\\xE3o\",okType:\"danger\",placement:\"topLeft\",onConfirm:function onConfirm(){return handleDelete(task._id);}},/*#__PURE__*/React.createElement(Button,{type:\"text\",icon:/*#__PURE__*/React.createElement(DeleteOutlined,{style:{color:theme.colors.red}})})),(permissions===null||permissions===void 0?void 0:permissions.task.update)&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{type:\"text\",icon:/*#__PURE__*/React.createElement(EditOutlined,{style:{color:theme.colors.primary}}),onClick:function onClick(){return handleEdit(task._id);}}),/*#__PURE__*/React.createElement(Switch,{size:\"small\",checked:task.finished,loading:loading,onChange:function onChange(value){return handleChangeFinished(value,task);}})));}}];return columns;},[handleChangeFinished,handleDelete,handleEdit,loading,permissions]);};export default useColumns;","map":null,"metadata":{},"sourceType":"module"}