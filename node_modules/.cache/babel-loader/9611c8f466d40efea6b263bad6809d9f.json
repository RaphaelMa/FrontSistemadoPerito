{"ast":null,"code":"import _objectSpread from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{message,Table}from'antd';import styled from'styled-components';import useColumns from'./useColumns';import messageError from'Utils/messageError';import{useDestroyFinancial,useSaveFinancial}from'./useHelpers';import moment from'moment';var FinancialTable=function FinancialTable(props){var loading=props.loading,financials=props.financials,header_height=props.header_height,setFinancials=props.setFinancials,setGeneralFinancial=props.setGeneralFinancial,handleTableChange=props.handleTableChange,handleOpenDrawer=props.handleOpenDrawer,afterSave=props.afterSave;var _useSaveFinancial=useSaveFinancial(),_useSaveFinancial2=_slicedToArray(_useSaveFinancial,1),saveFinancial=_useSaveFinancial2[0];var _useDestroyFinancial=useDestroyFinancial(),_useDestroyFinancial2=_slicedToArray(_useDestroyFinancial,1),destroyMutation=_useDestroyFinancial2[0];var handleDelete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(financial){var _yield$destroyMutatio,_data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return destroyMutation(financial._id);case 3:_yield$destroyMutatio=_context.sent;_data=_yield$destroyMutatio.data;if(_data===null||_data===void 0?void 0:_data.success){_context.next=8;break;}message.error(_data.message);return _context.abrupt(\"return\");case 8:setFinancials(function(prev){return prev.filter(function(f){return f._id!==financial._id;});});setGeneralFinancial===null||setGeneralFinancial===void 0?void 0:setGeneralFinancial(_data.generalFinancial);_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);messageError('202012172321');case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function handleDelete(_x){return _ref.apply(this,arguments);};}();var handleMovementPress=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(financial,action){var _yield$saveFinancial,_data2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(action==='edit')){_context2.next=4;break;}handleOpenDrawer(financial._id);_context2.next=23;break;case 4:if(!(action==='destroy')){_context2.next=9;break;}_context2.next=7;return handleDelete(financial);case 7:_context2.next=23;break;case 9:_context2.prev=9;_context2.next=12;return saveFinancial(_objectSpread({},financial,{isPaid:!financial.isPaid,paymentDate:financial.isPaid?null:moment().format('YYYY-MM-DD')}));case 12:_yield$saveFinancial=_context2.sent;_data2=_yield$saveFinancial.data;if(_data2===null||_data2===void 0?void 0:_data2.success){_context2.next=17;break;}message.error(_data2.message);return _context2.abrupt(\"return\");case 17:afterSave(_data2);_context2.next=23;break;case 20:_context2.prev=20;_context2.t0=_context2[\"catch\"](9);messageError('202012172244');case 23:case\"end\":return _context2.stop();}}},_callee2,null,[[9,20]]);}));return function handleMovementPress(_x2,_x3){return _ref2.apply(this,arguments);};}();var columns=useColumns({handleMovementPress:handleMovementPress});return/*#__PURE__*/React.createElement(TableContainer,{$header_height:header_height},/*#__PURE__*/React.createElement(StyledTable,{style:{flex:'auto',width:0},className:\"header-align-center\",columns:columns,dataSource:financials,rowKey:\"_id\",tableLayout:\"fixed\",size:\"middle\",loading:loading,bordered:true,onChange:handleTableChange,pagination:{showTotal:function showTotal(total){return\"\".concat(total,\" no total\");},showSizeChanger:true,defaultPageSize:20,pageSizeOptions:['10','20','40','50','100']},scroll:{y:2000},expandable:{rowExpandable:function rowExpandable(_ref3){var people_name=_ref3.people_name,observation=_ref3.observation;return!!people_name||!!observation;},expandedRowRender:function expandedRowRender(_ref4){var _id=_ref4._id,people_name=_ref4.people_name,observation=_ref4.observation;return/*#__PURE__*/React.createElement(Details,{key:_id},!!people_name&&/*#__PURE__*/React.createElement(Detail,null,/*#__PURE__*/React.createElement(Dot,null),/*#__PURE__*/React.createElement(\"div\",null,people_name)),!!observation&&/*#__PURE__*/React.createElement(Detail,null,/*#__PURE__*/React.createElement(Dot,null),/*#__PURE__*/React.createElement(\"div\",null,observation)));}}}));};FinancialTable.displayName=\"FinancialTable\";export default FinancialTable;var StyledTable=styled(Table).withConfig({displayName:\"FinancialTable__StyledTable\",componentId:\"sc-137cfce-0\"})([\"height:calc(100% - 40px);.ant-table-container,.ant-spin-nested-loading,.ant-table,.ant-spin-container{height:100%;}.ant-table-thead{th{text-align:center;}}.ant-table-body{height:calc(100% - 40px);}.ant-pagination{background-color:white;}.ant-pagination > li{z-index:100;}\"]);var TableContainer=styled.div.withConfig({displayName:\"FinancialTable__TableContainer\",componentId:\"sc-137cfce-1\"})([\"display:flex;margin:0 -2rem 0 0;height:calc(100% - \",\"px);\"],function(p){return p.$header_height;});var Details=styled.div.withConfig({displayName:\"FinancialTable__Details\",componentId:\"sc-137cfce-2\"})([\"margin-left:1rem !important;display:flex;flex-direction:column;\"]);var Dot=styled.div.withConfig({displayName:\"FinancialTable__Dot\",componentId:\"sc-137cfce-3\"})([\"display:flex;width:7px;height:7px;border-radius:50%;background-color:\",\";margin-right:5px;\"],function(p){return p.theme.colors.primary;});var Detail=styled.div.withConfig({displayName:\"FinancialTable__Detail\",componentId:\"sc-137cfce-4\"})([\"display:flex;align-items:center;justify-content:flex-start;margin:5px;\"]);","map":null,"metadata":{},"sourceType":"module"}