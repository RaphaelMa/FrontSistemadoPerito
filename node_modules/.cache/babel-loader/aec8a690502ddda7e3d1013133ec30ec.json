{"ast":null,"code":"var _jsxFileName = \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Components/Inputs/Financial/Accounts/AccountsInput.tsx\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useRef } from 'react';\nimport { Select } from 'antd';\nimport { deburr } from 'lodash';\nimport useGetAccount from './useGetAccounts';\nimport FinanceAccountDrawer from 'Components/Drawers/FinanceAccount/FinanceAccountDrawer';\nimport { useUserSelector } from 'Redux/UserReducer';\nimport { UnstyledButton } from 'Components/SistemaDoPerito';\nimport { PlusOutlined } from '@ant-design/icons';\n\nconst AccountsInput = ({\n  show_create_button = false,\n  query_options,\n  ...props\n}) => {\n  const plan_modules = useUserSelector(state => {\n    var _state$company;\n\n    return (_state$company = state.company) === null || _state$company === void 0 ? void 0 : _state$company.plan.modules;\n  });\n  const permissions = useUserSelector(state => state.permissions);\n  const AccountDrawerRef = useRef(null);\n  const [{\n    data: accounts = [],\n    loading\n  }, refetch] = useGetAccount(query_options);\n\n  const onCreateClick = () => {\n    var _AccountDrawerRef$cur;\n\n    (_AccountDrawerRef$cur = AccountDrawerRef.current) === null || _AccountDrawerRef$cur === void 0 ? void 0 : _AccountDrawerRef$cur.open();\n  };\n\n  const afterSave = account => {\n    refetch();\n    const is_multiple = props.mode === 'multiple' || props.mode === 'tags';\n    const value = is_multiple ? [...props.value, account._id] : account._id;\n\n    if (props.onChange) {\n      props.onChange(value, {\n        children: account.description,\n        value: account._id\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Select, Object.assign({\n    style: {\n      width: '100%'\n    },\n    showSearch: true,\n    filterOption: (raw_value, option) => {\n      const value = deburr(raw_value).toLowerCase();\n      const option_value = deburr(option === null || option === void 0 ? void 0 : option.children).toLowerCase();\n      return option_value.indexOf(value) >= 0;\n    },\n    loading: loading,\n    placeholder: \"Informe...\",\n    allowClear: true,\n    dropdownRender: menu => /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }\n    }, menu, show_create_button && (plan_modules === null || plan_modules === void 0 ? void 0 : plan_modules.Register) && (permissions === null || permissions === void 0 ? void 0 : permissions.financial.create) && /*#__PURE__*/React.createElement(UnstyledButton, {\n      style: {\n        display: 'block',\n        padding: 8\n      },\n      className: \"no-decoration\",\n      onClick: onCreateClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(PlusOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }\n    }), \" Nova conta\"))\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }), accounts.map(district => /*#__PURE__*/React.createElement(Select.Option, {\n    key: district._id,\n    value: district._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, district.description))), /*#__PURE__*/React.createElement(FinanceAccountDrawer, {\n    ref: AccountDrawerRef,\n    afterSave: afterSave,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }));\n};\n\n__signature__(AccountsInput, \"useUserSelector{plan_modules}\\nuseUserSelector{permissions}\\nuseRef{AccountDrawerRef}\\nuseGetAccount{[{ data: accounts = [], loading }, refetch]}\", () => [useUserSelector, useUserSelector, useGetAccount]);\n\nconst _default = AccountsInput;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(AccountsInput, \"AccountsInput\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Components/Inputs/Financial/Accounts/AccountsInput.tsx\");\n  reactHotLoader.register(_default, \"default\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Components/Inputs/Financial/Accounts/AccountsInput.tsx\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Components/Inputs/Financial/Accounts/AccountsInput.tsx"],"names":["React","useRef","Select","deburr","useGetAccount","FinanceAccountDrawer","useUserSelector","UnstyledButton","PlusOutlined","AccountsInput","show_create_button","query_options","props","plan_modules","state","company","plan","modules","permissions","AccountDrawerRef","data","accounts","loading","refetch","onCreateClick","current","open","afterSave","account","is_multiple","mode","value","_id","onChange","children","description","width","raw_value","option","toLowerCase","option_value","indexOf","menu","Register","financial","create","display","padding","map","district"],"mappings":"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","sourcesContent":["import React, { useRef } from 'react'\nimport { Select } from 'antd'\nimport { SelectProps } from 'antd/lib/select'\nimport { deburr } from 'lodash'\nimport useGetAccount, { FinancialAccountType } from './useGetAccounts'\nimport FinanceAccountDrawer, { FinanceAccountDrawerType } from 'Components/Drawers/FinanceAccount/FinanceAccountDrawer'\nimport { useUserSelector } from 'Redux/UserReducer'\nimport { UnstyledButton } from 'Components/SistemaDoPerito'\nimport { PlusOutlined } from '@ant-design/icons'\nimport { Options } from 'axios-hooks'\n\ntype Props = {\n  show_create_button?: boolean,\n  query_options?: Options\n} & SelectProps<any | any[]>\n\nconst AccountsInput: React.FC<Props> = ({ show_create_button = false, query_options, ...props }) => {\n  const plan_modules = useUserSelector(state => state.company?.plan.modules)\n  const permissions = useUserSelector(state => state.permissions)\n\n  const AccountDrawerRef = useRef<FinanceAccountDrawerType>(null)\n\n  const [{ data: accounts = [], loading }, refetch] = useGetAccount(query_options)\n\n  const onCreateClick = () => {\n    AccountDrawerRef.current?.open()\n  }\n\n  const afterSave = (account: FinancialAccountType) => {\n    refetch()\n    const is_multiple = props.mode === 'multiple' || props.mode === 'tags'\n\n    const value = is_multiple ? [...props.value, account._id] : account._id\n\n    if (props.onChange) {\n      props.onChange(value, { children: account.description, value: account._id! })\n    }\n  }\n\n  return (\n    <>\n      <Select<any[]>\n        style={{ width: '100%' }}\n        showSearch\n        filterOption={(raw_value, option) => {\n          const value = deburr(raw_value).toLowerCase()\n          const option_value = deburr(option?.children).toLowerCase()\n\n          return option_value.indexOf(value) >= 0\n        }}\n        loading={loading}\n        placeholder=\"Informe...\"\n        allowClear\n        dropdownRender={menu =>\n          <div>\n            {menu}\n            {show_create_button && plan_modules?.Register && permissions?.financial.create && (\n              <UnstyledButton\n                style={{ display: 'block', padding: 8 }}\n                className=\"no-decoration\"\n                onClick={onCreateClick}\n              >\n                <PlusOutlined/> Nova conta\n              </UnstyledButton>\n            )}\n          </div>\n        }\n        {...props}\n      >\n        {accounts.map(district => (\n          <Select.Option key={district._id} value={district._id}>\n            {district.description}\n          </Select.Option>\n        ))}\n      </Select>\n\n      <FinanceAccountDrawer ref={AccountDrawerRef} afterSave={afterSave}/>\n    </>\n  )\n}\n\nexport default AccountsInput\n"]},"metadata":{},"sourceType":"module"}