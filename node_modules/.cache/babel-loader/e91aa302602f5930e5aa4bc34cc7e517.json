{"ast":null,"code":"import _regeneratorRuntime from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{Button,Col,Form,Input,message,Row,Typography}from'antd';import{useUserSelector,useUserDispatch}from'Redux/UserReducer';import{Navigate}from'react-router';import{theme}from'Styles/theme';import{useActiveAccount,useResendCode}from'./useMutations';import{LoadingOutlined}from'@ant-design/icons';import{fetchInitalData}from'Redux/fetchActions';import messageError from'Utils/messageError';import styled from'styled-components';import successModal from'Utils/successModal';var Link=Typography.Link;var ActiveAccountForm=function ActiveAccountForm(){var _useUserSelector=useUserSelector(function(state){return state;}),account_verified=_useUserSelector.account_verified;var dispath=useUserDispatch();var _useActiveAccount=useActiveAccount(),_useActiveAccount2=_slicedToArray(_useActiveAccount,2),active_account_loading=_useActiveAccount2[0].loading,mutation=_useActiveAccount2[1];var _useResendCode=useResendCode(),_useResendCode2=_slicedToArray(_useResendCode,2),resend_code_loading=_useResendCode2[0].loading,resendCodeMutation=_useResendCode2[1];var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var setFields=form.setFields;var handleSendNewCode=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$resendCodeMuta,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return resendCodeMutation();case 3:_yield$resendCodeMuta=_context.sent;data=_yield$resendCodeMuta.data;if(data.success){_context.next=8;break;}message.error(data.message);return _context.abrupt(\"return\");case 8:successModal({content:/*#__PURE__*/React.createElement(TextContainer,null,/*#__PURE__*/React.createElement(\"p\",null,\"Um novo c\\xF3digo foi gerado\"),/*#__PURE__*/React.createElement(\"p\",null,\"Dentro de alguns minutos voc\\xEA receber\\xE1 em seu e-mail!\")),duration:3000});_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);messageError('2011010017');case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function handleSendNewCode(){return _ref.apply(this,arguments);};}();var handleActiveAccount=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref2){var code,_yield$mutation,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:code=_ref2.code;_context2.prev=1;_context2.next=4;return mutation({data:{code:code}});case 4:_yield$mutation=_context2.sent;data=_yield$mutation.data;if(data.success){_context2.next=12;break;}if(!(data.key==='code')){_context2.next=10;break;}setFields([{name:'code',errors:[data.message]}]);return _context2.abrupt(\"return\");case 10:message.error(data.message);return _context2.abrupt(\"return\");case 12:successModal({content:'Conta ativada com sucesso'});setTimeout(function(){dispath({type:'SET_ACTIVE_ACCOUNT',payload:true});fetchInitalData();},1500);_context2.next=19;break;case 16:_context2.prev=16;_context2.t0=_context2[\"catch\"](1);messageError('2010312232');case 19:case\"end\":return _context2.stop();}}},_callee2,null,[[1,16]]);}));return function handleActiveAccount(_x){return _ref3.apply(this,arguments);};}();if(account_verified)return/*#__PURE__*/React.createElement(Navigate,{to:\"/\"});return/*#__PURE__*/React.createElement(Form,{form:form,initialValues:{code:''},onFinish:handleActiveAccount},/*#__PURE__*/React.createElement(RowStyled,null,/*#__PURE__*/React.createElement(Col,{xs:24,md:14,lg:10,xl:10,xxl:8},/*#__PURE__*/React.createElement(Form.Item,{name:\"code\",validateTrigger:['onChange'],rules:[{validateTrigger:'onChange',required:true,message:'Campo obrigat√≥rio'}]},/*#__PURE__*/React.createElement(Input,{autoFocus:true,placeholder:\"Informe o c\\xF3digo\"})))),/*#__PURE__*/React.createElement(Row,{gutter:{xs:0,sm:16},justify:\"center\"},/*#__PURE__*/React.createElement(Col,{xs:24,sm:10,md:8,lg:6},/*#__PURE__*/React.createElement(Button,{htmlType:\"submit\",style:{width:'100%'},type:\"primary\",color:theme.colors.primary,loading:active_account_loading},\"Validar c\\xF3digo\"))),/*#__PURE__*/React.createElement(ResendCodeRow,null,/*#__PURE__*/React.createElement(Text,null,\"Caso n\\xE3o tenha recebido verifique sua caixa de spam ou clique abaixo para solicitar um novo c\\xF3digo.\"),/*#__PURE__*/React.createElement(ResendCodeLink,{disabled:resend_code_loading,onClick:handleSendNewCode},resend_code_loading&&/*#__PURE__*/React.createElement(LoadingOutlined,null),\" Gerar Novo C\\xF3digo\")));};ActiveAccountForm.displayName=\"ActiveAccountForm\";export default ActiveAccountForm;var RowStyled=styled(Row).attrs({justify:'center',gutter:[0,0]}).withConfig({displayName:\"ActiveAccountForm__RowStyled\",componentId:\"sc-1yrzu9d-0\"})([\"\"]);var Text=styled.p.withConfig({displayName:\"ActiveAccountForm__Text\",componentId:\"sc-1yrzu9d-1\"})([\"margin:auto 0;font-size:12px;\"]);var ResendCodeRow=styled(RowStyled).withConfig({displayName:\"ActiveAccountForm__ResendCodeRow\",componentId:\"sc-1yrzu9d-2\"})([\"margin-top:50px;flex-direction:column;text-align:center;\"]);var ResendCodeLink=styled(Link).withConfig({displayName:\"ActiveAccountForm__ResendCodeLink\",componentId:\"sc-1yrzu9d-3\"})([\"font-weight:600;width:fit-content;align-self:center;\"]);var TextContainer=styled.div.withConfig({displayName:\"ActiveAccountForm__TextContainer\",componentId:\"sc-1yrzu9d-4\"})([\"display:flex;flex-direction:column;text-align:center;font-size:16px;\"]);","map":null,"metadata":{},"sourceType":"module"}