{"ast":null,"code":"var _jsxFileName = \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/NewProcess/ExtraCard/MovementsTab/Movements.tsx\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useMemo, useState, useRef } from 'react';\nimport { DatePicker, Input, Row, Col } from 'antd';\nimport MovimentsTable from './MovementsTable';\nimport moment from 'moment';\nimport Fuse from 'fuse.js';\nconst FUSE_OPTIONS = {\n  threshold: 0.4,\n  isCaseSensitive: false,\n  findAllMatches: true,\n  keys: ['description']\n};\n\nconst Movements = ({\n  movements\n}) => {\n  const searchDelay = useRef(null);\n  const [start_date, setStartDate] = useState(null);\n  const [end_date, setEndDate] = useState(null);\n  const [search, setSearch] = useState();\n  const filter_by_date = useMemo(() => movements === null || movements === void 0 ? void 0 : movements.filter(movement => {\n    if (!start_date || !end_date || !(movement === null || movement === void 0 ? void 0 : movement.movementDate)) return true;\n    const date = moment(movement.movementDate, 'YYYY-MM-DD');\n    return date.isBetween(start_date, end_date) || date.isSame(start_date) || date.isSame(end_date);\n  }), [end_date, movements, start_date]);\n  const filtered_movements = useMemo(() => {\n    if (!search || !filter_by_date) return filter_by_date;\n    const fuse = new Fuse(filter_by_date, FUSE_OPTIONS);\n    return fuse.search(search).map(item => item.item);\n  }, [filter_by_date, search]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    gutter: 8,\n    style: {\n      marginBottom: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    flex: \"1 0 305\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DatePicker.RangePicker, {\n    format: \"DD/MM/YYYY\",\n    onChange: values => {\n      var _values$, _values$2;\n\n      setStartDate((values === null || values === void 0 ? void 0 : (_values$ = values[0]) === null || _values$ === void 0 ? void 0 : _values$.startOf('day')) || null);\n      setEndDate((values === null || values === void 0 ? void 0 : (_values$2 = values[1]) === null || _values$2 === void 0 ? void 0 : _values$2.startOf('day')) || null);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    flex: \"1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    onChange: event => {\n      const value = event.target.value;\n      if (searchDelay.current) clearTimeout(searchDelay.current);\n      searchDelay.current = setTimeout(() => setSearch(value), 300);\n    },\n    placeholder: \"Procure pela descri\\xE7\\xE3o\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(MovimentsTable, {\n    movements: filtered_movements,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }));\n};\n\n__signature__(Movements, \"useRef{searchDelay}\\nuseState{[start_date, setStartDate](null)}\\nuseState{[end_date, setEndDate](null)}\\nuseState{[search, setSearch]}\\nuseMemo{filter_by_date}\\nuseMemo{filtered_movements}\");\n\nconst _default = Movements;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(FUSE_OPTIONS, \"FUSE_OPTIONS\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/NewProcess/ExtraCard/MovementsTab/Movements.tsx\");\n  reactHotLoader.register(Movements, \"Movements\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/NewProcess/ExtraCard/MovementsTab/Movements.tsx\");\n  reactHotLoader.register(_default, \"default\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/NewProcess/ExtraCard/MovementsTab/Movements.tsx\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/NewProcess/ExtraCard/MovementsTab/Movements.tsx"],"names":["React","useMemo","useState","useRef","DatePicker","Input","Row","Col","MovimentsTable","moment","Fuse","FUSE_OPTIONS","threshold","isCaseSensitive","findAllMatches","keys","Movements","movements","searchDelay","start_date","setStartDate","end_date","setEndDate","search","setSearch","filter_by_date","filter","movement","movementDate","date","isBetween","isSame","filtered_movements","fuse","map","item","marginBottom","values","startOf","event","value","target","current","clearTimeout","setTimeout"],"mappings":"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","sourcesContent":["import React, { useMemo, useState, useRef } from 'react'\nimport { DatePicker, Input, Row, Col } from 'antd'\nimport { MovementType } from './types'\nimport MovimentsTable from './MovementsTable'\nimport moment, { Moment } from 'moment'\nimport Fuse from 'fuse.js'\n\ntype Props = {\n  movements?: MovementType[]\n}\n\nconst FUSE_OPTIONS = {\n  threshold: 0.4,\n  isCaseSensitive: false,\n  findAllMatches: true,\n  keys: ['description'],\n}\n\nconst Movements: React.FC<Props> = ({ movements }) => {\n  const searchDelay = useRef<number | null>(null)\n\n  const [start_date, setStartDate] = useState<Moment | null>(null)\n  const [end_date, setEndDate] = useState<Moment | null>(null)\n  const [search, setSearch] = useState<string>()\n\n  const filter_by_date = useMemo(() => (\n    movements?.filter(movement => {\n      if (!start_date || !end_date || !movement?.movementDate) return true\n\n      const date = moment(movement.movementDate, 'YYYY-MM-DD')\n      return date.isBetween(start_date, end_date) || date.isSame(start_date) || date.isSame(end_date)\n    })\n  ), [end_date, movements, start_date])\n\n  const filtered_movements = useMemo(() => {\n    if (!search || !filter_by_date) return filter_by_date\n\n    const fuse = new Fuse(filter_by_date, FUSE_OPTIONS)\n    return fuse.search(search).map(item => item.item)\n  }, [filter_by_date, search])\n\n  return (\n    <>\n      <Row gutter={8} style={{ marginBottom: '10px' }}>\n        <Col flex=\"1 0 305\">\n          <DatePicker.RangePicker\n            format=\"DD/MM/YYYY\"\n            onChange={(values) => {\n              setStartDate(values?.[0]?.startOf('day') || null)\n              setEndDate(values?.[1]?.startOf('day') || null)\n            }}\n          />\n        </Col>\n        <Col flex=\"1\">\n          <Input\n            onChange={(event) => {\n              const value = event.target.value\n              if (searchDelay.current) clearTimeout(searchDelay.current)\n\n              searchDelay.current = setTimeout(() => setSearch(value), 300)\n            }}\n            placeholder=\"Procure pela descrição\"\n          />\n        </Col>\n      </Row>\n      <MovimentsTable movements={filtered_movements}/>\n    </>\n  )\n}\n\nexport default Movements\n"]},"metadata":{},"sourceType":"module"}