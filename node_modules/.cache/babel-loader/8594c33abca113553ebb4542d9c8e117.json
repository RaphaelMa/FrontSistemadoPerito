{"ast":null,"code":"import _objectSpread from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useEffect,useMemo,useRef,useState}from'react';import HeaderActions from'./HeaderActions';import{filterData,scapeRegex}from'Utils/functions';import TableComponent from'Pages/JudicialDistrictLevel/TableComponent';import EmptyComponent from'Components/EmptyComponent/EmptyComponent';import useColumns from'Pages/JudicialDistrictLevel/useColumns';import useGetJudicialDistrictLevel from'./useGetJudicialDistrictLevel';import messageError from'Utils/messageError';import JudicialDistrictLevelDrawer from'Components/Drawers/JudicialDistrictLevel/JudicialDistrictLevel';import useDestroy from'./useDestroy';import{message}from'antd';import styled from'styled-components';import{useUserSelector}from'Redux/UserReducer';import PermissionsContainer from'Components/Permissions/Container';import useExportData from'./useExportData';var initial_filters={search:'',sort:{field:'description',order:'ascend'}};var columns_keys=['description'];var JudicialDistrictLevelList=function JudicialDistrictLevelList(_ref){var judicialDistrictId=_ref.judicialDistrictId;var plan_modules=useUserSelector(function(state){var _state$company;return(_state$company=state.company)===null||_state$company===void 0?void 0:_state$company.plan.modules;});var DrawerRef=useRef(null);var _useState=useState(initial_filters),_useState2=_slicedToArray(_useState,2),filters=_useState2[0],setFilters=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useDestroy=useDestroy(),_useDestroy2=_slicedToArray(_useDestroy,2),destroy=_useDestroy2[0],destroying=_useDestroy2[1];var _useGetJudicialDistri=useGetJudicialDistrictLevel(judicialDistrictId),_useGetJudicialDistri2=_slicedToArray(_useGetJudicialDistri,2),loading=_useGetJudicialDistri2[0].loading,getJudicialDistrictLevel=_useGetJudicialDistri2[1];var fetchJudicialDistrictLevel=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$getJudicialDis,_yield$getJudicialDis2,_data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getJudicialDistrictLevel();case 3:_yield$getJudicialDis=_context.sent;_yield$getJudicialDis2=_yield$getJudicialDis.data;_data=_yield$getJudicialDis2===void 0?[]:_yield$getJudicialDis2;setData(_data);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);messageError('2908202049');case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function fetchJudicialDistrictLevel(){return _ref2.apply(this,arguments);};}();useEffect(function(){setTimeout(function(){fetchJudicialDistrictLevel();},500);// eslint-disable-next-line\n},[]);var filtered_data=useMemo(function(){return filterData({data:data,filters:filters,columns_keys:columns_keys});},[filters,data]);var onPressEnter=useCallback(function(value){setFilters(function(old_filters){return _objectSpread({},old_filters,{search:scapeRegex(value)});});},[]);var handleOpenDrawer=function handleOpenDrawer(id){var _DrawerRef$current;(_DrawerRef$current=DrawerRef.current)===null||_DrawerRef$current===void 0?void 0:_DrawerRef$current.open(id);};var handleDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var _yield$destroy,_data2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return destroy(id);case 3:_yield$destroy=_context2.sent;_data2=_yield$destroy.data;if(_data2===null||_data2===void 0?void 0:_data2.success){_context2.next=8;break;}message.error(_data2.message);return _context2.abrupt(\"return\");case 8:message.success('Vara exclu√≠da com sucesso');fetchJudicialDistrictLevel();_context2.next=15;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](0);messageError('2908201934');case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[0,12]]);}));return function handleDelete(_x){return _ref3.apply(this,arguments);};}();var handleTableChange=useCallback(function(_pagination,_filter,sorter){var _sorter$column;var internal_filters=filters;if(sorter===null||sorter===void 0?void 0:(_sorter$column=sorter.column)===null||_sorter$column===void 0?void 0:_sorter$column.sorter){internal_filters=_objectSpread({},internal_filters,{sort:{order:sorter.order,field:sorter.field}});}setFilters(internal_filters);},[filters]);var locale=useMemo(function(){return{emptyText:/*#__PURE__*/React.createElement(EmptyComponent,{onClick:function onClick(){return handleOpenDrawer();},action_text:\"Vara\"})};},[]);var columns=useColumns({handleDelete:handleDelete,handleEdit:handleOpenDrawer});var afterSave=function afterSave(){fetchJudicialDistrictLevel();};var exportToXLS=useExportData(filtered_data);return/*#__PURE__*/React.createElement(PermissionsContainer,{has_module:plan_modules===null||plan_modules===void 0?void 0:plan_modules.Register},/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(HeaderActions,{onPressEnter:onPressEnter,setFilters:setFilters,placeholder:\"Informe a vara\",button_text:\"Nova Vara\",handleNew:handleOpenDrawer,exportToXLS:exportToXLS}),/*#__PURE__*/React.createElement(TableComponent,{columns:columns,filtered_data:filtered_data,handleTableChange:handleTableChange,loading:loading||destroying,locale:locale}),/*#__PURE__*/React.createElement(JudicialDistrictLevelDrawer,{judicialDistrictId:judicialDistrictId,afterSave:afterSave,ref:DrawerRef})));};JudicialDistrictLevelList.displayName=\"JudicialDistrictLevelList\";export default JudicialDistrictLevelList;var Container=styled.div.withConfig({displayName:\"JudicialDistrictLevelList__Container\",componentId:\"sc-1g41slw-0\"})([\"height:100%;width:100%;\"]);","map":null,"metadata":{},"sourceType":"module"}