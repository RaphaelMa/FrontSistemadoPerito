{"ast":null,"code":"import _objectWithoutProperties from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React,{useEffect,memo}from'react';import{useUserSelector}from'Redux/UserReducer';import{Navigate,useLocation}from'react-router';import{Route}from'react-router-dom';import{updatesTokenExpiration}from'Utils/user_token';import errorModal from'Utils/errorModal';import PermissionsContainer from'Components/Permissions/Container';var PrivateRoute=function PrivateRoute(_ref){var _company$toHire,_company$trial,_permissions$permissi;var plan_module=_ref.plan_module,permission=_ref.permission,props=_objectWithoutProperties(_ref,[\"plan_module\",\"permission\"]);var location=useLocation();var plan_modules=useUserSelector(function(state){var _state$company;return(_state$company=state.company)===null||_state$company===void 0?void 0:_state$company.plan.modules;});var permissions=useUserSelector(function(state){return state.permissions;});var _useUserSelector=useUserSelector(function(state){return state;}),is_authenticated=_useUserSelector.is_authenticated,loading=_useUserSelector.loading,account_verified=_useUserSelector.account_verified,company=_useUserSelector.company,trial_rest_days=_useUserSelector.trial_rest_days,has_open_payments=_useUserSelector.has_open_payments;var toHire=(_company$toHire=company===null||company===void 0?void 0:company.toHire)!==null&&_company$toHire!==void 0?_company$toHire:true;var trial=(_company$trial=company===null||company===void 0?void 0:company.trial)!==null&&_company$trial!==void 0?_company$trial:true;useEffect(function(){if(is_authenticated)updatesTokenExpiration();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);if(!is_authenticated)return/*#__PURE__*/React.createElement(Navigate,{to:\"/login\"});if(loading||!account_verified&&props.path!=='/active-account')return null;if(!toHire&&!(trial&&trial_rest_days>0)&&!location.pathname.includes('/plans')){errorModal({content:'Seu período de teste já chegou ao fim! Escolha um plano e contrate nossa solução!'},3000);return/*#__PURE__*/React.createElement(Navigate,{to:\"/plans\"});}if(has_open_payments&&props.path!=='/billing')return null;return/*#__PURE__*/React.createElement(Route,Object.assign({},props,{element:/*#__PURE__*/ // @ts-ignore\nReact.createElement(PermissionsContainer,{has_module:plan_modules===null||plan_modules===void 0?void 0:plan_modules[plan_module],has_permission:permissions===null||permissions===void 0?void 0:(_permissions$permissi=permissions[permission])===null||_permissions$permissi===void 0?void 0:_permissions$permissi.read},props.element)}));};PrivateRoute.displayName=\"PrivateRoute\";export default memo(PrivateRoute);","map":null,"metadata":{},"sourceType":"module"}