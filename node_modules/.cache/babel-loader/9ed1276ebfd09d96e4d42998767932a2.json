{"ast":null,"code":"import _defineProperty from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{memo,useCallback,useEffect,useMemo,useState}from'react';import{Button,Checkbox,DatePicker,Dropdown,Menu,Select,Tag,Tooltip}from'antd';import{LoadingOutlined,MenuUnfoldOutlined}from'@ant-design/icons';import{useUserSelector}from'Redux/UserReducer';import{INITIAL_FILTERS}from'./ProcessList';import{IMPORTED_KEYS}from'./useColumns';import{cloneDeep,deburr}from'lodash';import ProcessFinancialSituationInput from'Components/Inputs/ProcessFinnacialSituationInput/ProcessFinancialSituationInput';import StatusImpeachmentInput from'Components/Inputs/StatusImpeachmentInput/StatusImpeachmentInput';import ProcessSituationInput from'Components/Inputs/ProcessSituationInput/ProcessSituationInput';import JudicialDistrictInput from'Components/Inputs/JudicialDistrictInput/JudicialDistrictInput';import ProcessNatureInput from'Components/Inputs/ProcessNatureInput/ProcessNatureInput';import PersonKindInput from'Components/Inputs/PersonKindInput/PersonKindInput';import CompanyInput from'Components/Inputs/CompanyInput/CompanyInput';import styled from'styled-components';import ExcelIcon from'Components/ExcelIcon';import PersonInput from'../../Components/Inputs/PersonInput/PersonInput';var STATUS_IMPORTED_KEYS=[{key:'not_imported',label:'Não importado',color:IMPORTED_KEYS['not_imported']},{key:'importing',label:'Importando',color:IMPORTED_KEYS['importing']},{key:'imported',label:'Importado',color:IMPORTED_KEYS['imported']},{key:'error_importing',label:'Erro na importação',color:IMPORTED_KEYS['error_importing']}];var Header=function Header(props){var filters=props.filters,button_text=props.button_text,setFilters=props.setFilters,handleNew=props.handleNew,visible_columns=props.visible_columns,setVisibleColumns=props.setVisibleColumns,columns_loading=props.columns_loading,handleSaveVisibleColumns=props.handleSaveVisibleColumns,exportToXLS=props.exportToXLS,save_columns_loading=props.save_columns_loading,process_number=props.process_number;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),visible_columns_menu=_useState2[0],setVisibleColumnsMenu=_useState2[1];var _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),dates=_useState4[0],setDates=_useState4[1];var permissions=useUserSelector(function(state){return state.permissions;});var plan_modules=useUserSelector(function(state){var _state$company;return(_state$company=state.company)===null||_state$company===void 0?void 0:_state$company.plan.modules;});var eventClickPress=useCallback(function(click){var is_visible_columns_item=click.target.closest('[data-js=\"visible-columns\"]');if(!is_visible_columns_item){setVisibleColumnsMenu(false);}},[]);useEffect(function(){window.addEventListener('click',eventClickPress);return function(){return window.removeEventListener('click',eventClickPress);};},[eventClickPress]);useEffect(function(){if((dates===null||dates===void 0?void 0:dates.filter(Boolean).length)===2){setFilters(function(old_filters){return _objectSpread({},old_filters,{dates:dates});});return;}if((dates===null||dates===void 0?void 0:dates.filter(function(date){return!date;}).length)===2){setFilters(function(old_filters){return _objectSpread({},old_filters,{dates:undefined});});}},[dates,setFilters]);var handleSelectChange=function handleSelectChange(value,filter_key){if(typeof value==='object'){setFilters(function(old_filters){return _objectSpread({},old_filters,_defineProperty({},filter_key,value.length?value:undefined));});return;}setFilters(function(old_filters){return _objectSpread({},old_filters,_defineProperty({},filter_key,['true','false'].includes(value)?value==='true':value));});};var handleChangeVisibleColumn=useCallback(function(visible,key){if(!visible_columns)return;var new_columns=cloneDeep(visible_columns.columns);new_columns[key].visible=!visible;setVisibleColumns(function(prev){if(!prev)return undefined;return _objectSpread({},prev,{columns:new_columns});});},[setVisibleColumns,visible_columns]);var menu=useMemo(function(){return/*#__PURE__*/React.createElement(Menu,{\"data-js\":\"visible-columns\"},/*#__PURE__*/React.createElement(MenuGroup,null,Object.keys((visible_columns===null||visible_columns===void 0?void 0:visible_columns.columns)||{}).map(function(key){// @ts-ignore\nvar column_name=visible_columns.columns[key]['description'];// @ts-ignore\nvar visible=visible_columns.columns[key]['visible'];return/*#__PURE__*/React.createElement(Menu.Item,{key:key// @ts-ignore\n,onClick:function onClick(){return handleChangeVisibleColumn(visible,key);}},/*#__PURE__*/React.createElement(Checkbox,{checked:visible}),\" \",column_name);})),/*#__PURE__*/React.createElement(Menu.Divider,{style:{marginTop:0}}),/*#__PURE__*/React.createElement(Menu.Item,{key:\"save\"},/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){setVisibleColumnsMenu(false);handleSaveVisibleColumns();},style:{width:'100%'},type:\"primary\",loading:save_columns_loading},\"Salvar\")));},[handleChangeVisibleColumn,handleSaveVisibleColumns,save_columns_loading,visible_columns]);return/*#__PURE__*/React.createElement(ActionsContainer,null,/*#__PURE__*/React.createElement(FiltersWrapper,null,/*#__PURE__*/React.createElement(SelectContainer,{className:\"filter-item\"},/*#__PURE__*/React.createElement(DatePicker,{format:\"DD/MM/YYYY\",style:{width:'49%'},placeholder:\"Data inicial\",value:dates===null||dates===void 0?void 0:dates[0],allowClear:true,onChange:function onChange(value){return setDates([value,dates===null||dates===void 0?void 0:dates[1]]);}}),/*#__PURE__*/React.createElement(DatePicker,{format:\"DD/MM/YYYY\",style:{width:'49%'},placeholder:\"Data final\",value:dates===null||dates===void 0?void 0:dates[1],allowClear:true,onChange:function onChange(value){return setDates([dates===null||dates===void 0?void 0:dates[0],value]);}})),/*#__PURE__*/React.createElement(ProcessSituationInput,{className:\"filter-item\",mode:\"multiple\",query_options:{useCache:false},value:filters===null||filters===void 0?void 0:filters.situation_id,onChange:function onChange(values){return handleSelectChange(values,'situation_id');},allowClear:true}),/*#__PURE__*/React.createElement(ProcessFinancialSituationInput,{className:\"filter-item\",mode:\"multiple\",query_options:{useCache:true},onChange:function onChange(values){return handleSelectChange(values,'financialSituation_id');},value:filters===null||filters===void 0?void 0:filters.financialSituation_id,allowClear:true}),/*#__PURE__*/React.createElement(JudicialDistrictInput,{className:\"filter-item\",mode:\"multiple\",allowClear:true,value:filters===null||filters===void 0?void 0:filters.judicialDistrict_id,onChange:function onChange(values){return handleSelectChange(values,'judicialDistrict_id');}}),/*#__PURE__*/React.createElement(SelectContainer,{className:\"filter-item\"},/*#__PURE__*/React.createElement(Select,{placeholder:\"Status push\",style:{width:'49%'},value:(filters===null||filters===void 0?void 0:filters.statusProcessMonitoring)===undefined?undefined:filters.statusProcessMonitoring?'true':'false',onChange:function onChange(value){return handleSelectChange(value,'statusProcessMonitoring');},allowClear:true},/*#__PURE__*/React.createElement(Select.Option,{value:\"true\"},\"Push ativo\"),/*#__PURE__*/React.createElement(Select.Option,{value:\"false\"},\"Push inativo\")),/*#__PURE__*/React.createElement(Select,{placeholder:\"AJG\",style:{width:'49%'},value:(filters===null||filters===void 0?void 0:filters.freeJustice)===undefined?undefined:filters.freeJustice?'true':'false',onChange:function onChange(value){return handleSelectChange(value,'freeJustice');},allowClear:true},/*#__PURE__*/React.createElement(Select.Option,{value:\"true\"},\"Sim\"),/*#__PURE__*/React.createElement(Select.Option,{value:\"false\"},\"N\\xE3o\"))),/*#__PURE__*/React.createElement(ProcessNatureInput,{className:\"filter-item\",allowClear:true,mode:\"multiple\",query_options:{useCache:true},value:filters===null||filters===void 0?void 0:filters.nature_id,placeholder:\"Natureza do Processo\",onChange:function onChange(values){return handleSelectChange(values,'nature_id');}}),/*#__PURE__*/React.createElement(PersonKindInput,{className:\"filter-item\",allowClear:true,mode:\"multiple\",query_options:{useCache:true},value:filters===null||filters===void 0?void 0:filters.kind_person_id,placeholder:\"Tipo de Pessoa\",onChange:function onChange(values){return handleSelectChange(values,'kind_person_id');}}),/*#__PURE__*/React.createElement(Select,{className:\"filter-item\",allowClear:true,placeholder:\"N\\xFAmero do Processo\",onChange:function onChange(value){return setFilters(function(old_filters){return _objectSpread({},old_filters,{processNumber:value});});},showSearch:true,value:filters.processNumber,autoClearSearchValue:true,filterOption:function filterOption(raw_value,option){var value=deburr(raw_value).toLowerCase();var option_value=deburr(option===null||option===void 0?void 0:option.children).toLowerCase();return option_value.indexOf(value)>=0;}},process_number.map(function(proc){return/*#__PURE__*/React.createElement(Select.Option,{key:proc.processNumber,value:proc.processNumber},proc.processNumber);})),/*#__PURE__*/React.createElement(SelectContainer,{className:\"filter-item\"},/*#__PURE__*/React.createElement(Select,{placeholder:\"Favorito\",style:{width:'49%'},value:(filters===null||filters===void 0?void 0:filters.favorite)===undefined?undefined:filters.favorite?'true':'false',onChange:function onChange(value){return handleSelectChange(value,'favorite');},allowClear:true},/*#__PURE__*/React.createElement(Select.Option,{value:\"true\"},\"Sim\"),/*#__PURE__*/React.createElement(Select.Option,{value:\"false\"},\"N\\xE3o\")),/*#__PURE__*/React.createElement(Select,{placeholder:\"Importa\\xE7\\xE3o\",style:{width:'49%'},value:filters.statusImport_key,onChange:function onChange(value){return setFilters(function(old_filters){return _objectSpread({},old_filters,{statusImport_key:value});});},allowClear:true},STATUS_IMPORTED_KEYS.map(function(record){return/*#__PURE__*/React.createElement(Select.Option,{value:record.key,key:record.key},/*#__PURE__*/React.createElement(Tag,{color:record.color},record.label));}))),/*#__PURE__*/React.createElement(StatusImpeachmentInput,{className:\"filter-item\",allowClear:true,mode:\"multiple\",placeholder:\"Status da Impugna\\xE7\\xE3o\",value:filters===null||filters===void 0?void 0:filters.statusImpeachment_id,onChange:function onChange(values){return handleSelectChange(values,'statusImpeachment_id');}}),/*#__PURE__*/React.createElement(PersonInput,{className:\"filter-item\",allowClear:true,with_users:true,value:filters===null||filters===void 0?void 0:filters.person_id,onChange:function onChange(value){return handleSelectChange(value,'person_id');}}),!!(plan_modules===null||plan_modules===void 0?void 0:plan_modules.Multicompany)&&/*#__PURE__*/React.createElement(CompanyInput,{className:\"filter-item\",allowClear:true,mode:\"multiple\",query_options:{useCache:true},value:filters===null||filters===void 0?void 0:filters.multicompany_id,onChange:function onChange(values){return handleSelectChange(values,'multicompany_id');},placeholder:\"Empresa\"})),/*#__PURE__*/React.createElement(ButtonsContainer,null,(permissions===null||permissions===void 0?void 0:permissions.process.create)&&/*#__PURE__*/React.createElement(Button,{block:true,type:\"primary\",onClick:function onClick(){return handleNew();}},button_text),/*#__PURE__*/React.createElement(Button,{type:\"default\",block:true,onClick:function onClick(){setDates(INITIAL_FILTERS.dates);setFilters(INITIAL_FILTERS);}},\"Limpar Filtros\"),/*#__PURE__*/React.createElement(ButtonsWrapper,null,/*#__PURE__*/React.createElement(Tooltip,{title:\"Exportar para excel\"},/*#__PURE__*/React.createElement(Button,{onClick:exportToXLS,block:true,style:{marginRight:10}},/*#__PURE__*/React.createElement(ExcelIcon,null))),/*#__PURE__*/React.createElement(Dropdown,{disabled:!visible_columns||columns_loading,visible:visible_columns_menu,trigger:['click'],overlay:menu,placement:\"bottomRight\"},/*#__PURE__*/React.createElement(Tooltip,{title:\"Colunas vis\\xEDveis!\"},/*#__PURE__*/React.createElement(Button,{block:true,\"data-js\":\"visible-columns\",icon:columns_loading?/*#__PURE__*/React.createElement(LoadingOutlined,null):/*#__PURE__*/React.createElement(MenuUnfoldOutlined,null),onClick:function onClick(){return setVisibleColumnsMenu(function(old_state){return!old_state;});}}))))));};Header.displayName=\"Header\";export default memo(Header);var ActionsContainer=styled.div.withConfig({displayName:\"Header__ActionsContainer\",componentId:\"fq5is9-0\"})([\"display:flex;justify-content:space-between;align-items:flex-start;margin:1rem 0;\"]);var FiltersWrapper=styled.div.withConfig({displayName:\"Header__FiltersWrapper\",componentId:\"fq5is9-1\"})([\"display:flex;width:93%;flex-wrap:wrap;gap:1rem;.filter-item{width:24% !important;}.ant-select-selector{flex-wrap:nowrap;overflow:hidden;text-overflow:ellipsis;}.ant-input-search{flex:1;margin-right:2%;}\"]);var SelectContainer=styled.div.withConfig({displayName:\"Header__SelectContainer\",componentId:\"fq5is9-2\"})([\"display:flex;justify-content:space-between;gap:0 1rem;align-items:flex-start;\"]);var ButtonsContainer=styled.div.withConfig({displayName:\"Header__ButtonsContainer\",componentId:\"fq5is9-3\"})([\"display:flex;flex-direction:column;gap:1rem;align-items:flex-end;justify-content:flex-start;\"]);var MenuGroup=styled(Menu.ItemGroup).withConfig({displayName:\"Header__MenuGroup\",componentId:\"fq5is9-4\"})([\"max-height:400px;overflow:auto;margin:0;padding:0 8px;\"]);var ButtonsWrapper=styled.div.withConfig({displayName:\"Header__ButtonsWrapper\",componentId:\"fq5is9-5\"})([\"display:flex;justify-content:space-between;flex-direction:row;align-items:flex-end;width:100%;\"]);","map":null,"metadata":{},"sourceType":"module"}