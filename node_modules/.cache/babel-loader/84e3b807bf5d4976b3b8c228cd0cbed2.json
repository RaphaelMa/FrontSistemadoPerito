{"ast":null,"code":"var _jsxFileName = \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/Users/Users.tsx\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport ContainerList from 'Components/MainList/ContainerList';\nimport HeaderActions from 'Components/MainList/HeaderActions';\nimport UsersTable from './UsersTable';\nimport EmptyComponent from 'Components/EmptyComponent/EmptyComponent';\nimport useColumns from './useColumns';\nimport useGetUsers from './useGetUsers';\nimport messageError from 'Utils/messageError';\nimport useDestroyUser from './useDestroyUser';\nimport { useNavigate } from 'react-router-dom';\nimport { filterData, scapeRegex } from 'Utils/functions';\nimport { useUserSelector } from 'Redux/UserReducer';\nimport { message } from 'antd';\nconst initial_filters = {\n  search: '',\n  pagination: {\n    current_page: 1,\n    page_size: 20\n  },\n  sort: {\n    field: 'name',\n    order: 'ascend'\n  }\n};\nconst columns_keys = ['name'];\n\nconst Users = () => {\n  const permissions = useUserSelector(state => state.permissions);\n  const kindUser = useUserSelector(state => state.kindUser);\n  const [filters, setFilters] = useState(initial_filters);\n  const [data, setData] = useState([]);\n  const [{\n    loading\n  }, getUsers] = useGetUsers();\n  const [destroyUser, {\n    loading: destroy_loading\n  }] = useDestroyUser();\n  const navigate = useNavigate();\n\n  const loadUsers = async () => {\n    try {\n      const response = await getUsers();\n      setData(response.data);\n    } catch (error) {\n      messageError('202023080130');\n    }\n  };\n\n  useEffect(() => {\n    loadUsers(); // eslint-disable-next-line\n  }, []);\n  const onPressEnter = useCallback(value => {\n    setFilters(old_filters => ({ ...old_filters,\n      search: scapeRegex(value)\n    }));\n  }, []);\n  const handleOpenUser = useCallback(id => {\n    if (id) {\n      navigate(`/user/${id}`);\n      return;\n    }\n\n    navigate('/user');\n  }, [navigate]);\n  const handleTableChange = useCallback((pagination, _filter, sorter) => {\n    var _sorter$column;\n\n    let internal_filters = filters;\n\n    if (sorter === null || sorter === void 0 ? void 0 : (_sorter$column = sorter.column) === null || _sorter$column === void 0 ? void 0 : _sorter$column.sorter) {\n      internal_filters = { ...internal_filters,\n        sort: {\n          order: sorter.order,\n          field: sorter.field\n        }\n      };\n    }\n\n    internal_filters = { ...internal_filters,\n      pagination: {\n        current_page: pagination.current || internal_filters.pagination.current_page,\n        page_size: pagination.pageSize || internal_filters.pagination.page_size\n      }\n    };\n    setFilters(internal_filters);\n  }, [filters]);\n  const locale = useMemo(() => ({\n    emptyText: (permissions === null || permissions === void 0 ? void 0 : permissions.user.create) && /*#__PURE__*/React.createElement(EmptyComponent, {\n      onClick: () => handleOpenUser(),\n      action_text: \"Usu\\xE1rio\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }\n    })\n  }), [handleOpenUser, permissions]);\n\n  const handleDelete = async id => {\n    try {\n      const response = await destroyUser(id);\n\n      if (response.data.success) {\n        message.success('Usuário excluído com sucesso');\n        setData(prev => prev.filter(user => user._id !== id));\n      }\n    } catch (error) {\n      messageError('202008262002');\n    }\n  };\n\n  const filtered_data = useMemo(() => filterData({\n    data,\n    filters,\n    columns_keys\n  }), [filters, data]);\n  const columns = useColumns({\n    handleDelete,\n    handleEdit: handleOpenUser\n  });\n  return /*#__PURE__*/React.createElement(ContainerList, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 5\n    }\n  }, (kindUser === null || kindUser === void 0 ? void 0 : kindUser.kindUser_key) === 'admin' && /*#__PURE__*/React.createElement(HeaderActions, {\n    onPressEnter: onPressEnter,\n    setFilters: setFilters,\n    placeholder: \"Informe nome do usu\\xE1rio\",\n    button_text: \"Novo Usu\\xE1rio\",\n    handleNew: handleOpenUser,\n    has_create_permission: permissions === null || permissions === void 0 ? void 0 : permissions.user.create,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(UsersTable, {\n    columns: columns,\n    filtered_data: filtered_data,\n    filters: filters,\n    handleTableChange: handleTableChange,\n    loading: loading || destroy_loading,\n    locale: locale,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }));\n};\n\n__signature__(Users, \"useUserSelector{permissions}\\nuseUserSelector{kindUser}\\nuseState{[filters, setFilters](initial_filters)}\\nuseState{[data, setData]([])}\\nuseGetUsers{[{ loading }, getUsers]}\\nuseDestroyUser{[destroyUser, { loading: destroy_loading }]}\\nuseNavigate{navigate}\\nuseEffect{}\\nuseCallback{onPressEnter}\\nuseCallback{handleOpenUser}\\nuseCallback{handleTableChange}\\nuseMemo{locale}\\nuseMemo{filtered_data}\\nuseColumns{columns}\", () => [useUserSelector, useUserSelector, useGetUsers, useDestroyUser, useNavigate, useColumns]);\n\nUsers.displayName = \"Users\";\nconst _default = Users;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(initial_filters, \"initial_filters\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/Users/Users.tsx\");\n  reactHotLoader.register(columns_keys, \"columns_keys\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/Users/Users.tsx\");\n  reactHotLoader.register(Users, \"Users\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/Users/Users.tsx\");\n  reactHotLoader.register(_default, \"default\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/Users/Users.tsx\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/Users/Users.tsx"],"names":["React","useCallback","useEffect","useMemo","useState","ContainerList","HeaderActions","UsersTable","EmptyComponent","useColumns","useGetUsers","messageError","useDestroyUser","useNavigate","filterData","scapeRegex","useUserSelector","message","initial_filters","search","pagination","current_page","page_size","sort","field","order","columns_keys","Users","permissions","state","kindUser","filters","setFilters","data","setData","loading","getUsers","destroyUser","destroy_loading","navigate","loadUsers","response","error","onPressEnter","value","old_filters","handleOpenUser","id","handleTableChange","_filter","sorter","internal_filters","column","current","pageSize","locale","emptyText","user","create","handleDelete","success","prev","filter","_id","filtered_data","columns","handleEdit","kindUser_key"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from 'react'\nimport ContainerList from 'Components/MainList/ContainerList'\nimport HeaderActions from 'Components/MainList/HeaderActions'\nimport UsersTable from './UsersTable'\nimport EmptyComponent from 'Components/EmptyComponent/EmptyComponent'\nimport useColumns from './useColumns'\nimport useGetUsers from './useGetUsers'\nimport messageError from 'Utils/messageError'\nimport useDestroyUser from './useDestroyUser'\nimport { useNavigate } from 'react-router-dom'\nimport { UserType } from './types'\nimport { TablePaginationConfig } from 'antd/es/table'\nimport { filterData, FiltersType, scapeRegex } from 'Utils/functions'\nimport { Key } from 'antd/lib/table/interface'\nimport { useUserSelector } from 'Redux/UserReducer'\nimport { message } from 'antd'\n\nconst initial_filters: FiltersType = {\n  search: '',\n  pagination: {\n    current_page: 1,\n    page_size: 20,\n  },\n  sort: {\n    field: 'name',\n    order: 'ascend',\n  },\n}\n\nconst columns_keys = ['name']\n\nconst Users: React.FC = () => {\n  const permissions = useUserSelector(state => state.permissions)\n  const kindUser = useUserSelector(state => state.kindUser)\n\n\n  const [filters, setFilters] = useState<FiltersType>(initial_filters)\n  const [data, setData] = useState<UserType[]>([])\n  const [{ loading }, getUsers] = useGetUsers()\n  const [destroyUser, { loading: destroy_loading }] = useDestroyUser()\n  const navigate = useNavigate()\n\n  const loadUsers = async () => {\n    try {\n      const response = await getUsers()\n      setData(response.data)\n    } catch (error) {\n      messageError('202023080130')\n    }\n  }\n\n  useEffect(() => {\n    loadUsers()\n    // eslint-disable-next-line\n  }, [])\n\n  const onPressEnter = useCallback((value: string) => {\n    setFilters((old_filters) => ({ ...old_filters, search: scapeRegex(value) }))\n  }, [])\n\n  const handleOpenUser = useCallback((id?: string) => {\n    if (id) {\n      navigate(`/user/${id}`)\n      return\n    }\n\n    navigate('/user')\n  }, [navigate])\n\n  const handleTableChange = useCallback((\n    pagination: TablePaginationConfig,\n    _filter: Record<string, Key[] | null>,\n    sorter: any,\n  ): void => {\n    let internal_filters: FiltersType = filters\n\n    if (sorter?.column?.sorter) {\n      internal_filters = { ...internal_filters, sort: { order: sorter.order, field: sorter.field } }\n    }\n\n    internal_filters = {\n      ...internal_filters,\n      pagination: {\n        current_page: pagination.current || internal_filters!.pagination!.current_page,\n        page_size: pagination.pageSize || internal_filters!.pagination!.page_size,\n      },\n    }\n\n    setFilters(internal_filters)\n  }, [filters])\n\n  const locale = useMemo(() => ({\n    emptyText: (\n      permissions?.user.create && (\n        <EmptyComponent\n          onClick={() => handleOpenUser()}\n          action_text=\"Usuário\"\n        />\n      )\n    ),\n  }), [handleOpenUser, permissions])\n\n  const handleDelete = async (id: string) => {\n    try {\n      const response = await destroyUser(id)\n      if (response.data.success) {\n        message.success('Usuário excluído com sucesso')\n        setData((prev) => prev.filter(user => user._id !== id))\n      }\n    } catch (error) {\n      messageError('202008262002')\n    }\n  }\n\n  const filtered_data = useMemo(() => filterData({ data, filters, columns_keys }), [filters, data])\n  const columns = useColumns({ handleDelete, handleEdit: handleOpenUser })\n\n  return (\n    <ContainerList>\n      {kindUser?.kindUser_key === 'admin' && (\n        <HeaderActions\n          onPressEnter={onPressEnter}\n          setFilters={setFilters}\n          placeholder=\"Informe nome do usuário\"\n          button_text=\"Novo Usuário\"\n          handleNew={handleOpenUser}\n          has_create_permission={permissions?.user.create}\n        />\n      )}\n\n      <UsersTable\n        columns={columns}\n        filtered_data={filtered_data}\n        filters={filters}\n        handleTableChange={handleTableChange}\n        loading={loading || destroy_loading}\n        locale={locale}\n      />\n    </ContainerList>\n  )\n}\n\nexport default Users"]},"metadata":{},"sourceType":"module"}