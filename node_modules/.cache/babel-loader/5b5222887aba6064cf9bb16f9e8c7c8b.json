{"ast":null,"code":"import _regeneratorRuntime from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{forwardRef,useCallback,useImperativeHandle,useState}from'react';import{Modal,Spin,Form}from'antd';import TaskColumnForm from'./TaskColumnForm';import styled from'styled-components';import useSaveColumn from'./useSaveColumn';import messageError from'Utils/messageError';var TaskColumnModal=function TaskColumnModal(_ref,ref){var afterSave=_ref.afterSave;var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var submit=form.submit,setFieldsValue=form.setFieldsValue,resetFields=form.resetFields;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),visible=_useState2[0],setVisible=_useState2[1];var _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),id=_useState4[0],setId=_useState4[1];var _useSaveColumn=useSaveColumn(),_useSaveColumn2=_slicedToArray(_useSaveColumn,2),saveColumn=_useSaveColumn2[0],loading=_useSaveColumn2[1].loading;var open=useCallback(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id,name){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setId(id);setFieldsValue({name:name});setVisible(true);case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}(),[setFieldsValue]);var close=useCallback(function(){setId(undefined);setVisible(false);setTimeout(function(){return resetFields();},400);},[resetFields]);useImperativeHandle(ref,function(){return{open:open,close:close};});var onFinish=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values){var _yield$saveColumn,data,_ref4,success,_column;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return saveColumn({_id:id,description:values.name});case 3:_yield$saveColumn=_context2.sent;data=_yield$saveColumn.data;_ref4=data||{},success=_ref4.success,_column=_ref4.column;if(success){_context2.next=9;break;}messageError('202106031721');return _context2.abrupt(\"return\");case 9:close();afterSave===null||afterSave===void 0?void 0:afterSave(_column);_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](0);messageError('202106031721');case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[0,13]]);}));return function onFinish(_x3){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(Modal,{visible:visible,closable:false,okText:\"Salvar\",cancelText:\"Cancelar\",onOk:submit,okButtonProps:{loading:loading},onCancel:close,centered:true,width:420},/*#__PURE__*/React.createElement(Title,null,!!id?\"Editar coluna\":\"Nova coluna\"),/*#__PURE__*/React.createElement(Spin,{spinning:false},/*#__PURE__*/React.createElement(Form,{form:form,layout:\"vertical\",onFinish:onFinish},/*#__PURE__*/React.createElement(TaskColumnForm,null))));};TaskColumnModal.displayName=\"TaskColumnModal\";export default forwardRef(TaskColumnModal);var Title=styled.div.withConfig({displayName:\"TaskColumnModal__Title\",componentId:\"sc-3dsu6d-0\"})([\"font-weight:500;font-size:16px;line-height:22px;display:flex;justify-content:center;margin-bottom:20px;\"]);","map":null,"metadata":{},"sourceType":"module"}