{"ast":null,"code":"import _regeneratorRuntime from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{forwardRef,useImperativeHandle,useState}from'react';import{Alert,Button,Drawer,Form,message,Spin}from'antd';import JudicialDistrictForm from'./JudicialDistrictForm';import styled from'styled-components';import useSaveJudicialDistrict from'./useSaveJudicialDistrict';import messageError from'Utils/messageError';import useGetJudicialDistrict from'./useGetJudicialDistrict';import JudicialDistrictLevelList from'Pages/JudicialDistrictLevel/JudicialDistrictLevelList';import successModal from'Utils/successModal';var JudicialDistrict=function JudicialDistrict(_ref,ref){var afterSave=_ref.afterSave;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),id=_useState2[0],setId=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),visible=_useState4[0],setVisible=_useState4[1];var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var _useSaveJudicialDistr=useSaveJudicialDistrict(),_useSaveJudicialDistr2=_slicedToArray(_useSaveJudicialDistr,2),saveMutation=_useSaveJudicialDistr2[0],saving=_useSaveJudicialDistr2[1];var _useGetJudicialDistri=useGetJudicialDistrict(),_useGetJudicialDistri2=_slicedToArray(_useGetJudicialDistri,2),getJudicialDistrict=_useGetJudicialDistri2[0],loading=_useGetJudicialDistri2[1];var loadData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var _yield$getJudicialDis,judicialDistrict;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getJudicialDistrict(id);case 3:_yield$getJudicialDis=_context.sent;judicialDistrict=_yield$getJudicialDis.data.judicialDistrict;form.setFieldsValue(judicialDistrict);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);messageError('2508202252');case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function loadData(_x){return _ref2.apply(this,arguments);};}();var open=function open(id){if(id){loadData(id);setId(id);}setVisible(true);};var close=function close(){setVisible(false);form.resetFields();setId('');};useImperativeHandle(ref,function(){return{open:open,close:close};});var save=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values){var _yield$saveMutation,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return saveMutation(values);case 3:_yield$saveMutation=_context2.sent;data=_yield$saveMutation.data;if(data===null||data===void 0?void 0:data.success){_context2.next=8;break;}message.error(data.message);return _context2.abrupt(\"return\");case 8:successModal({content:'Comarca salva com sucesso'});afterSave&&afterSave(data.judicialDistrict);close();_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](0);messageError('3008201528');case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[0,13]]);}));return function save(_x2){return _ref3.apply(this,arguments);};}();var handleSave=function handleSave(){form.validateFields().then(function(values){return save(values);});};return/*#__PURE__*/React.createElement(Drawer,{visible:visible,onClose:close,title:\"Comarca\",width:700,footer:/*#__PURE__*/React.createElement(Footer,null,/*#__PURE__*/React.createElement(Button,{onClick:close},\"Cancelar\"),/*#__PURE__*/React.createElement(Button,{loading:saving,onClick:handleSave,type:\"primary\"},\"Salvar\"))},/*#__PURE__*/React.createElement(Spin,{spinning:loading||saving},/*#__PURE__*/React.createElement(JudicialDistrictForm,{form:form}),id?/*#__PURE__*/React.createElement(JudicialDistrictLevelList,{judicialDistrictId:id}):/*#__PURE__*/React.createElement(AlertComponent,{message:\"Voc\\xEA poder\\xE1 adicionar as varas editando uma comarca!\",type:\"info\",showIcon:true})));};JudicialDistrict.displayName=\"JudicialDistrict\";export default forwardRef(JudicialDistrict);var Footer=styled.div.withConfig({displayName:\"JudicialDistrict__Footer\",componentId:\"sc-1yolkc7-0\"})([\"text-align:right;button + button{margin-left:8px;}\"]);var AlertComponent=styled(Alert).withConfig({displayName:\"JudicialDistrict__AlertComponent\",componentId:\"sc-1yolkc7-1\"})([\"border:none;\"]);","map":null,"metadata":{},"sourceType":"module"}