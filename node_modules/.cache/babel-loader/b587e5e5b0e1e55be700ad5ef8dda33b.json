{"ast":null,"code":"var _jsxFileName = \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/Financial/FinancialTable.tsx\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React from 'react';\nimport { message, Table } from 'antd';\nimport styled from 'styled-components';\nimport useColumns from './useColumns';\nimport messageError from 'Utils/messageError';\nimport { useDestroyFinancial, useSaveFinancial } from './useHelpers';\nimport moment from 'moment';\n\nconst FinancialTable = props => {\n  const {\n    loading,\n    financials,\n    header_height,\n    setFinancials,\n    setGeneralFinancial,\n    handleTableChange,\n    handleOpenDrawer,\n    afterSave\n  } = props;\n  const [saveFinancial] = useSaveFinancial();\n  const [destroyMutation] = useDestroyFinancial();\n\n  const handleDelete = async financial => {\n    try {\n      const {\n        data\n      } = await destroyMutation(financial._id);\n\n      if (!(data === null || data === void 0 ? void 0 : data.success)) {\n        message.error(data.message);\n        return;\n      }\n\n      setFinancials(prev => prev.filter(f => f._id !== financial._id));\n      setGeneralFinancial === null || setGeneralFinancial === void 0 ? void 0 : setGeneralFinancial(data.generalFinancial);\n    } catch (e) {\n      messageError('202012172321');\n    }\n  };\n\n  const handleMovementPress = async (financial, action) => {\n    if (action === 'edit') {\n      handleOpenDrawer(financial._id);\n    } else if (action === 'destroy') {\n      await handleDelete(financial);\n    } else {\n      try {\n        const {\n          data\n        } = await saveFinancial({ ...financial,\n          isPaid: !financial.isPaid,\n          paymentDate: financial.isPaid ? null : moment().format('YYYY-MM-DD')\n        });\n\n        if (!(data === null || data === void 0 ? void 0 : data.success)) {\n          message.error(data.message);\n          return;\n        }\n\n        afterSave(data);\n      } catch (e) {\n        messageError('202012172244');\n      }\n    }\n  };\n\n  const columns = useColumns({\n    handleMovementPress\n  });\n  return /*#__PURE__*/React.createElement(TableContainer, {\n    $header_height: header_height,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(StyledTable, {\n    style: {\n      flex: 'auto',\n      width: 0\n    },\n    className: \"header-align-center\",\n    columns: columns,\n    dataSource: financials,\n    rowKey: \"_id\",\n    tableLayout: \"fixed\",\n    size: \"middle\",\n    loading: loading,\n    bordered: true,\n    onChange: handleTableChange,\n    pagination: {\n      showTotal: total => `${total} no total`,\n      showSizeChanger: true,\n      defaultPageSize: 20,\n      pageSizeOptions: ['10', '20', '40', '50', '100']\n    },\n    scroll: {\n      y: 2000\n    },\n    expandable: {\n      rowExpandable: ({\n        people_name,\n        observation\n      }) => !!people_name || !!observation,\n      expandedRowRender: ({\n        _id,\n        people_name,\n        observation\n      }) => /*#__PURE__*/React.createElement(Details, {\n        key: _id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }\n      }, !!people_name && /*#__PURE__*/React.createElement(Detail, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Dot, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 19\n        }\n      }, people_name)), !!observation && /*#__PURE__*/React.createElement(Detail, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Dot, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 19\n        }\n      }, observation)))\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }));\n};\n\n__signature__(FinancialTable, \"useSaveFinancial{[saveFinancial]}\\nuseDestroyFinancial{[destroyMutation]}\\nuseColumns{columns}\", () => [useSaveFinancial, useDestroyFinancial, useColumns]);\n\nFinancialTable.displayName = \"FinancialTable\";\nconst _default = FinancialTable;\nexport default _default;\nconst StyledTable = styled(Table).withConfig({\n  displayName: \"FinancialTable__StyledTable\",\n  componentId: \"sc-137cfce-0\"\n})([\"height:calc(100% - 40px);.ant-table-container,.ant-spin-nested-loading,.ant-table,.ant-spin-container{height:100%;}.ant-table-thead{th{text-align:center;}}.ant-table-body{height:calc(100% - 40px);}.ant-pagination{background-color:white;}.ant-pagination > li{z-index:100;}\"]);\nconst TableContainer = styled.div.withConfig({\n  displayName: \"FinancialTable__TableContainer\",\n  componentId: \"sc-137cfce-1\"\n})([\"display:flex;margin:0 -2rem 0 0;height:calc(100% - \", \"px);\"], p => p.$header_height);\nconst Details = styled.div.withConfig({\n  displayName: \"FinancialTable__Details\",\n  componentId: \"sc-137cfce-2\"\n})([\"margin-left:1rem !important;display:flex;flex-direction:column;\"]);\nconst Dot = styled.div.withConfig({\n  displayName: \"FinancialTable__Dot\",\n  componentId: \"sc-137cfce-3\"\n})([\"display:flex;width:7px;height:7px;border-radius:50%;background-color:\", \";margin-right:5px;\"], p => p.theme.colors.primary);\nconst Detail = styled.div.withConfig({\n  displayName: \"FinancialTable__Detail\",\n  componentId: \"sc-137cfce-4\"\n})([\"display:flex;align-items:center;justify-content:flex-start;margin:5px;\"]);\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(FinancialTable, \"FinancialTable\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/Financial/FinancialTable.tsx\");\n  reactHotLoader.register(StyledTable, \"StyledTable\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/Financial/FinancialTable.tsx\");\n  reactHotLoader.register(TableContainer, \"TableContainer\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/Financial/FinancialTable.tsx\");\n  reactHotLoader.register(Details, \"Details\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/Financial/FinancialTable.tsx\");\n  reactHotLoader.register(Dot, \"Dot\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/Financial/FinancialTable.tsx\");\n  reactHotLoader.register(Detail, \"Detail\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/Financial/FinancialTable.tsx\");\n  reactHotLoader.register(_default, \"default\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/Financial/FinancialTable.tsx\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/Financial/FinancialTable.tsx"],"names":["React","message","Table","styled","useColumns","messageError","useDestroyFinancial","useSaveFinancial","moment","FinancialTable","props","loading","financials","header_height","setFinancials","setGeneralFinancial","handleTableChange","handleOpenDrawer","afterSave","saveFinancial","destroyMutation","handleDelete","financial","data","_id","success","error","prev","filter","f","generalFinancial","e","handleMovementPress","action","isPaid","paymentDate","format","columns","flex","width","showTotal","total","showSizeChanger","defaultPageSize","pageSizeOptions","y","rowExpandable","people_name","observation","expandedRowRender","StyledTable","TableContainer","div","p","$header_height","Details","Dot","theme","colors","primary","Detail"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { message, Table } from 'antd'\nimport styled from 'styled-components'\nimport useColumns from './useColumns'\nimport messageError from 'Utils/messageError'\nimport { useDestroyFinancial, useSaveFinancial, QueryPayload } from './useHelpers'\nimport { FinancialType, GeneralFinancial } from './types'\nimport moment from 'moment'\nimport { TablePaginationConfig } from 'antd/lib/table'\nimport { FinancialDrawerType } from 'Components/Drawers/Financial/FinancialDrawer'\n\ntype Props = {\n  loading: boolean,\n  financials: FinancialType[],\n  setFinancials: React.Dispatch<React.SetStateAction<FinancialType[]>>,\n  setGeneralFinancial?: React.Dispatch<React.SetStateAction<GeneralFinancial>>,\n  handleTableChange: (pagination: TablePaginationConfig, filter: any, sorter: any) => void,\n  handleOpenDrawer: FinancialDrawerType['open'],\n  afterSave: (data: QueryPayload) => void,\n  header_height: number,\n }\n\nconst FinancialTable: React.FC<Props> = (props) => {\n  const { loading, financials, header_height, setFinancials, setGeneralFinancial, handleTableChange, handleOpenDrawer, afterSave } = props\n\n  const [saveFinancial] = useSaveFinancial()\n  const [destroyMutation] = useDestroyFinancial()\n\n  const handleDelete = async (financial: FinancialType) => {\n    try {\n      const { data } = await destroyMutation(financial._id!)\n\n      if (!data?.success) {\n        message.error(data.message)\n        return\n      }\n\n      setFinancials((prev) => prev.filter(f => f._id !== financial._id))\n      setGeneralFinancial?.(data.generalFinancial)\n    } catch (e) {\n      messageError('202012172321')\n    }\n  }\n\n  const handleMovementPress = async (financial: FinancialType, action: 'edit' | 'destroy' | 'action') => {\n    if (action === 'edit') {\n      handleOpenDrawer(financial._id)\n    } else if (action === 'destroy') {\n      await handleDelete(financial)\n    } else {\n      try {\n        const { data } = await saveFinancial({\n          ...financial,\n          isPaid: !financial.isPaid,\n          paymentDate: financial.isPaid ? null : moment().format('YYYY-MM-DD')\n        })\n\n        if (!data?.success) {\n          message.error(data.message)\n          return\n        }\n\n        afterSave(data)\n      } catch (e) {\n        messageError('202012172244')\n      }\n    }\n  }\n\n  const columns = useColumns({ handleMovementPress })\n\n  return (\n    <TableContainer $header_height={header_height}>\n      <StyledTable\n        style={{ flex: 'auto', width: 0 }}\n        className=\"header-align-center\"\n        columns={columns}\n        dataSource={financials}\n        rowKey=\"_id\"\n        tableLayout=\"fixed\"\n        size=\"middle\"\n        loading={loading}\n        bordered\n        onChange={handleTableChange}\n        pagination={{\n          showTotal: total => `${total} no total`,\n          showSizeChanger: true,\n          defaultPageSize: 20,\n          pageSizeOptions: ['10', '20', '40', '50', '100']\n        }}\n        scroll={{ y: 2000 }}\n        expandable={{\n          rowExpandable: ({ people_name, observation }) => (!!people_name || !!observation),\n          expandedRowRender: ({ _id, people_name, observation }) => (\n            <Details key={_id}>\n              {!!people_name && (\n                <Detail>\n                  <Dot/>\n                  <div>{people_name}</div>\n                </Detail>\n              )}\n\n              {!!observation && (\n                <Detail>\n                  <Dot/>\n                  <div>{observation}</div>\n                </Detail>\n              )}\n            </Details>\n          )\n        }}\n      />\n    </TableContainer>\n  )\n}\n\nexport default FinancialTable\n\nconst StyledTable = styled(Table)`\n  height: calc(100% - 40px);\n\n  .ant-table-container, .ant-spin-nested-loading, .ant-table, .ant-spin-container {\n    height: 100%;\n  }\n\n  .ant-table-thead {\n    th {\n      text-align: center;\n    }\n  }\n\n  .ant-table-body {\n    height: calc(100% - 40px);\n  }\n\n  .ant-pagination {\n    background-color: white;\n  }\n\n  .ant-pagination > li {\n    z-index: 100;\n  }\n` as typeof Table\n\nconst TableContainer = styled.div<{ $header_height: number }>`\n  display: flex;\n  margin: 0 -2rem 0 0;\n  height: calc(100% - ${p => p.$header_height}px);\n`\n\nconst Details = styled.div`\n  margin-left: 1rem !important;\n  display: flex;\n  flex-direction: column;\n`\n\nconst Dot = styled.div`\n  display: flex;\n  width: 7px;\n  height: 7px;\n  border-radius: 50%;\n  background-color: ${p => p.theme.colors.primary};\n  margin-right: 5px;\n`\n\nconst Detail = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  margin: 5px;\n`\n"]},"metadata":{},"sourceType":"module"}