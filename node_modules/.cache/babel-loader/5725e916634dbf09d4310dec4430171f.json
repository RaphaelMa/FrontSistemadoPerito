{"ast":null,"code":"var _jsxFileName = \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Components/Inputs/FinanceCategory/FinanceCategory.tsx\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useRef } from 'react';\nimport { Select } from 'antd';\nimport { PlusOutlined } from '@ant-design/icons';\nimport { UnstyledButton } from 'Components/SistemaDoPerito';\nimport { deburr } from 'lodash';\nimport { useUserSelector } from 'Redux/UserReducer';\nimport CategoryDrawer from 'Components/Drawers/FincanceCategory/Category';\nimport useGetCategories from './useGetCategories';\n\nconst CategoryInput = ({\n  show_create_button,\n  afterSave,\n  ...props\n}) => {\n  const plan_modules = useUserSelector(state => {\n    var _state$company;\n\n    return (_state$company = state.company) === null || _state$company === void 0 ? void 0 : _state$company.plan.modules;\n  });\n  const permissions = useUserSelector(state => state.permissions);\n  const categoryDrawerRef = useRef(null);\n  const [{\n    data,\n    loading\n  }, refetch] = useGetCategories();\n  const categories = data || [];\n\n  const onCreateClick = () => {\n    var _categoryDrawerRef$cu;\n\n    (_categoryDrawerRef$cu = categoryDrawerRef.current) === null || _categoryDrawerRef$cu === void 0 ? void 0 : _categoryDrawerRef$cu.open();\n  };\n\n  const internalAfterSave = category => {\n    var _props$onChange;\n\n    refetch();\n    const value = props.mode === 'multiple' || props.mode === 'tags' ? [...props.value, category._id] : category._id;\n    (_props$onChange = props.onChange) === null || _props$onChange === void 0 ? void 0 : _props$onChange.call(props, value, {\n      children: category.description,\n      value: category._id\n    });\n    afterSave === null || afterSave === void 0 ? void 0 : afterSave();\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Select, Object.assign({\n    style: {\n      width: '100%'\n    },\n    loading: loading,\n    placeholder: \"Categoria\",\n    showSearch: true,\n    filterOption: (raw_value, option) => {\n      const value = deburr(raw_value).toLowerCase();\n      const option_value = deburr(option === null || option === void 0 ? void 0 : option.children).toLowerCase();\n      return option_value.indexOf(value) >= 0;\n    },\n    dropdownRender: menu => /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }\n    }, menu, show_create_button && (plan_modules === null || plan_modules === void 0 ? void 0 : plan_modules.Financial) && (permissions === null || permissions === void 0 ? void 0 : permissions.financial.create) && /*#__PURE__*/React.createElement(UnstyledButton, {\n      style: {\n        display: 'block',\n        padding: 8\n      },\n      className: \"no-decoration\",\n      onClick: onCreateClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(PlusOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }\n    }), \" Nova categoria\"))\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }), categories.map(category => /*#__PURE__*/React.createElement(Select.Option, {\n    key: category._id,\n    value: category._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, category.description))), /*#__PURE__*/React.createElement(CategoryDrawer, {\n    ref: categoryDrawerRef,\n    afterSave: internalAfterSave,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }));\n};\n\n__signature__(CategoryInput, \"useUserSelector{plan_modules}\\nuseUserSelector{permissions}\\nuseRef{categoryDrawerRef}\\nuseGetCategories{[{ data, loading }, refetch]}\", () => [useUserSelector, useUserSelector, useGetCategories]);\n\nconst _default = CategoryInput;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(CategoryInput, \"CategoryInput\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Components/Inputs/FinanceCategory/FinanceCategory.tsx\");\n  reactHotLoader.register(_default, \"default\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Components/Inputs/FinanceCategory/FinanceCategory.tsx\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Components/Inputs/FinanceCategory/FinanceCategory.tsx"],"names":["React","useRef","Select","PlusOutlined","UnstyledButton","deburr","useUserSelector","CategoryDrawer","useGetCategories","CategoryInput","show_create_button","afterSave","props","plan_modules","state","company","plan","modules","permissions","categoryDrawerRef","data","loading","refetch","categories","onCreateClick","current","open","internalAfterSave","category","value","mode","_id","onChange","children","description","width","raw_value","option","toLowerCase","option_value","indexOf","menu","Financial","financial","create","display","padding","map"],"mappings":"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","sourcesContent":["import React, { useRef } from 'react'\nimport { Select } from 'antd'\nimport { SelectProps } from 'antd/lib/select'\nimport { PlusOutlined } from '@ant-design/icons'\nimport { UnstyledButton } from 'Components/SistemaDoPerito'\nimport { deburr } from 'lodash'\nimport { CategoryType } from 'Components/Drawers/FincanceCategory/useSaveCategory'\nimport { useUserSelector } from 'Redux/UserReducer'\nimport CategoryDrawer, { CategoryDrawerType } from 'Components/Drawers/FincanceCategory/Category'\nimport useGetCategories from './useGetCategories'\n\ntype Props = {\n  show_create_button?: boolean,\n  afterSave?: () => void,\n} & SelectProps<any | any[]>\n\nconst CategoryInput: React.FC<Props> = ({ show_create_button, afterSave, ...props }) => {\n  const plan_modules = useUserSelector(state => state.company?.plan.modules)\n  const permissions = useUserSelector(state => state.permissions)\n\n  const categoryDrawerRef = useRef<CategoryDrawerType>(null)\n\n  const [{ data, loading }, refetch] = useGetCategories()\n  const categories = data || []\n\n  const onCreateClick = () => {\n    categoryDrawerRef.current?.open()\n  }\n\n  const internalAfterSave = (category: CategoryType) => {\n    refetch()\n    const value = props.mode === 'multiple' || props.mode === 'tags' ? [...props.value, category._id] : category._id\n\n    props.onChange?.(value, { children: category.description, value: category._id! })\n\n    afterSave?.()\n  }\n\n  return (\n    <>\n      <Select\n        style={{ width: '100%' }}\n        loading={loading}\n        placeholder=\"Categoria\"\n        showSearch\n        filterOption={(raw_value, option) => {\n          const value = deburr(raw_value).toLowerCase()\n          const option_value = deburr(option?.children).toLowerCase()\n\n          return option_value.indexOf(value) >= 0\n        }}\n        dropdownRender={menu =>\n          <div>\n            {menu}\n            {show_create_button && plan_modules?.Financial && permissions?.financial.create &&\n            <UnstyledButton\n                style={{ display: 'block', padding: 8 }}\n                className=\"no-decoration\"\n                onClick={onCreateClick}\n            >\n                <PlusOutlined/> Nova categoria\n            </UnstyledButton>\n            }\n          </div>\n        }\n        {...props}\n      >\n        {categories.map(category => (\n          <Select.Option key={category._id} value={category._id}>{category.description}</Select.Option>\n        ))}\n      </Select>\n      <CategoryDrawer ref={categoryDrawerRef} afterSave={internalAfterSave}/>\n    </>\n  )\n}\n\nexport default CategoryInput\n"]},"metadata":{},"sourceType":"module"}