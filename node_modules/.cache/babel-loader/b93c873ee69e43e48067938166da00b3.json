{"ast":null,"code":"var _jsxFileName = \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Components/Drawers/ProcessFinancialSituation/ProcessFinancialSituation.tsx\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { forwardRef, useImperativeHandle, useState } from 'react';\nimport { Button, Drawer, Form, message, Spin } from 'antd';\nimport messageError from 'Utils/messageError';\nimport styled from 'styled-components';\nimport successModal from 'Utils/successModal';\nimport ProcessFinancialSituationForm from './ProcessFinancialSituationForm';\nimport useGetProcessFinancialSituation from './useGetProcessFinancialSituation';\nimport useSaveProcessFinancialSituation from './useSaveProcessFinancialSituation';\n\nconst ProcessFinancialSituation = ({\n  afterSave\n}, ref) => {\n  const [form] = Form.useForm();\n  const [visible, setVisible] = useState(false);\n  const [getProcessFinancialSituation, {\n    loading\n  }] = useGetProcessFinancialSituation();\n  const [saveProcessFinancialSituation, {\n    loading: save_loading\n  }] = useSaveProcessFinancialSituation();\n\n  const open = id => {\n    if (id) loadProcessFinancialSituation(id);\n    setVisible(true);\n  };\n\n  const close = () => {\n    setVisible(false);\n    setTimeout(() => form.resetFields(), 300);\n  };\n\n  useImperativeHandle(ref, () => ({\n    open,\n    close\n  }));\n\n  const loadProcessFinancialSituation = async id => {\n    try {\n      const response = await getProcessFinancialSituation(id);\n      const financial_situation = response.data.financialSituation;\n      form.setFieldsValue(financial_situation);\n    } catch (error) {\n      messageError('202008222208');\n      return;\n    }\n  };\n\n  const save = async values => {\n    let response;\n\n    try {\n      response = await saveProcessFinancialSituation(values);\n    } catch (error) {\n      messageError('202008222139');\n      return;\n    }\n\n    const success = response.data.success;\n    const financial_situation = response.data.financialSituation;\n\n    if (success) {\n      successModal({\n        content: 'Situação financeira salva com sucesso'\n      });\n      afterSave({ ...values,\n        _id: financial_situation._id\n      });\n      close();\n      return;\n    }\n\n    message.error(response.data.message);\n  };\n\n  const handleSave = () => {\n    form.validateFields().then(values => save(values));\n  };\n\n  return /*#__PURE__*/React.createElement(Drawer, {\n    visible: visible,\n    onClose: close,\n    title: \"Situa\\xE7\\xE3o Financeira\",\n    width: 500,\n    footer: /*#__PURE__*/React.createElement(Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: close,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }\n    }, \"Cancelar\"), /*#__PURE__*/React.createElement(Button, {\n      loading: loading || save_loading,\n      onClick: handleSave,\n      type: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }\n    }, \"Salvar\")),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Spin, {\n    spinning: loading || save_loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ProcessFinancialSituationForm, {\n    form: form,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  })));\n};\n\n__signature__(ProcessFinancialSituation, \"useForm{[form]}\\nuseState{[visible, setVisible](false)}\\nuseGetProcessFinancialSituation{[getProcessFinancialSituation, { loading }]}\\nuseSaveProcessFinancialSituation{[saveProcessFinancialSituation, { loading: save_loading }]}\\nuseImperativeHandle{}\", () => [useGetProcessFinancialSituation, useSaveProcessFinancialSituation, useImperativeHandle]);\n\nProcessFinancialSituation.displayName = \"ProcessFinancialSituation\";\n\nconst _default = forwardRef(ProcessFinancialSituation);\n\nexport default _default;\nconst Footer = styled.div.withConfig({\n  displayName: \"ProcessFinancialSituation__Footer\",\n  componentId: \"sc-7end87-0\"\n})([\"text-align:right;button + button{margin-left:8px;}\"]);\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(ProcessFinancialSituation, \"ProcessFinancialSituation\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Components/Drawers/ProcessFinancialSituation/ProcessFinancialSituation.tsx\");\n  reactHotLoader.register(Footer, \"Footer\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Components/Drawers/ProcessFinancialSituation/ProcessFinancialSituation.tsx\");\n  reactHotLoader.register(_default, \"default\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Components/Drawers/ProcessFinancialSituation/ProcessFinancialSituation.tsx\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Components/Drawers/ProcessFinancialSituation/ProcessFinancialSituation.tsx"],"names":["React","forwardRef","useImperativeHandle","useState","Button","Drawer","Form","message","Spin","messageError","styled","successModal","ProcessFinancialSituationForm","useGetProcessFinancialSituation","useSaveProcessFinancialSituation","ProcessFinancialSituation","afterSave","ref","form","useForm","visible","setVisible","getProcessFinancialSituation","loading","saveProcessFinancialSituation","save_loading","open","id","loadProcessFinancialSituation","close","setTimeout","resetFields","response","financial_situation","data","financialSituation","setFieldsValue","error","save","values","success","content","_id","handleSave","validateFields","then","Footer","div"],"mappings":"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","sourcesContent":["import React, { forwardRef, useImperativeHandle, useState } from 'react'\nimport { Button, Drawer, Form, message, Spin } from 'antd'\nimport messageError from 'Utils/messageError'\nimport styled from 'styled-components'\nimport successModal from 'Utils/successModal'\nimport { ProcessFinancialSituationType } from './types'\nimport ProcessFinancialSituationForm from './ProcessFinancialSituationForm'\nimport useGetProcessFinancialSituation from './useGetProcessFinancialSituation'\nimport useSaveProcessFinancialSituation from './useSaveProcessFinancialSituation'\n\ntype OpenType = (id?: string) => void\n\nexport type ProcessFinancialSituationDrawerRefType = {\n  open: OpenType,\n  close: () => void,\n}\n\ntype Props = {\n  afterSave: (ProcessFinancialSituation: Omit<ProcessFinancialSituationType, '_id'> & { _id: string }) => void,\n}\n\nconst ProcessFinancialSituation: React.ForwardRefRenderFunction<ProcessFinancialSituationDrawerRefType, Props> = ({ afterSave }, ref) => {\n  const [form] = Form.useForm()\n  const [visible, setVisible] = useState(false)\n\n  const [getProcessFinancialSituation, { loading }] = useGetProcessFinancialSituation()\n  const [saveProcessFinancialSituation, { loading: save_loading }] = useSaveProcessFinancialSituation()\n\n  const open: OpenType = (id) => {\n    if (id) loadProcessFinancialSituation(id)\n\n    setVisible(true)\n  }\n\n  const close = () => {\n    setVisible(false)\n    setTimeout(() => form.resetFields(), 300)\n  }\n\n  useImperativeHandle(ref, () => ({ open, close }))\n\n  const loadProcessFinancialSituation = async (id: string) => {\n    try {\n      const response = await getProcessFinancialSituation(id)\n      const financial_situation = response.data.financialSituation\n\n      form.setFieldsValue(financial_situation)\n    } catch (error) {\n      messageError('202008222208')\n      return\n    }\n  }\n\n  const save = async (values: ProcessFinancialSituationType) => {\n    let response\n    try {\n      response = await saveProcessFinancialSituation(values)\n    } catch (error) {\n      messageError('202008222139')\n      return\n    }\n\n    const success = response.data.success\n    const financial_situation = response.data.financialSituation\n\n    if (success) {\n      successModal({ content: 'Situação financeira salva com sucesso' })\n      afterSave({ ...values, _id: financial_situation._id })\n      close()\n      return\n    }\n\n    message.error(response.data.message)\n  }\n\n  const handleSave = () => {\n    form.validateFields()\n      .then(values => save(values as ProcessFinancialSituationType))\n  }\n\n  return (\n    <Drawer\n      visible={visible}\n      onClose={close}\n      title=\"Situação Financeira\"\n      width={500}\n      footer={\n        <Footer>\n          <Button onClick={close}>Cancelar</Button>\n          <Button loading={loading || save_loading} onClick={handleSave} type=\"primary\">Salvar</Button>\n        </Footer>\n      }\n    >\n      <Spin spinning={loading || save_loading}>\n        <ProcessFinancialSituationForm form={form}/>\n      </Spin>\n    </Drawer>\n  )\n}\n\nexport default forwardRef(ProcessFinancialSituation)\n\nconst Footer = styled.div`\n  text-align: right;\n\n  button + button {\n    margin-left: 8px;\n  }\n`\n"]},"metadata":{},"sourceType":"module"}