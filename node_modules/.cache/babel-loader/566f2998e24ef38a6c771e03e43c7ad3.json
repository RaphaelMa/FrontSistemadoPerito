{"ast":null,"code":"var _jsxFileName = \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/NewProcess/Tabs/FinanceProcess/FinanceProcess.tsx\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport FinancialTable from 'Pages/Financial/FinancialTable';\nimport useGetProcessFinancial from './useGetProcessFianancial';\nimport messageError from 'Utils/messageError';\nimport styled from 'styled-components';\nimport { Button, Row } from 'antd';\nimport { useParams } from 'react-router';\nimport { currencyFormatter } from 'Utils/formatters';\nimport MenuTop from 'Pages/NewProcess/MenuTop';\nimport FinancialDrawer from 'Components/Drawers/Financial/FinancialDrawer';\nimport { filterData } from 'Utils/functions';\nimport { useUserSelector } from 'Redux/UserReducer';\nimport PermissionsContainer from 'Components/Permissions/Container';\nconst initial_filters = {\n  pagination: {\n    current_page: 1,\n    page_size: 20\n  },\n  sort: {\n    field: 'expirationDate',\n    order: 'ascend'\n  }\n};\n\nconst FinaceProcess = () => {\n  const {\n    id\n  } = useParams();\n  const permissions = useUserSelector(state => state.permissions);\n  const plan_modules = useUserSelector(state => {\n    var _state$company;\n\n    return (_state$company = state.company) === null || _state$company === void 0 ? void 0 : _state$company.plan.modules;\n  });\n  const financialModalRef = useRef(null);\n  const [financials, setFinancials] = useState([]);\n  const [totals, setTotals] = useState({\n    totalPay: 0,\n    totalReceive: 0\n  });\n  const [filters, setFilters] = useState(initial_filters);\n  const [{\n    loading\n  }, getFinancials] = useGetProcessFinancial(id);\n\n  const fetchData = async () => {\n    if (!(plan_modules === null || plan_modules === void 0 ? void 0 : plan_modules.Financial) || !(permissions === null || permissions === void 0 ? void 0 : permissions.financial.read)) return;\n\n    try {\n      var _data$message, _data$message2, _data$message3;\n\n      const {\n        data\n      } = await getFinancials();\n      setFinancials(((_data$message = data.message) === null || _data$message === void 0 ? void 0 : _data$message.dataFinancial) || []);\n      setTotals({\n        totalPay: ((_data$message2 = data.message) === null || _data$message2 === void 0 ? void 0 : _data$message2.totalPay) || 0,\n        totalReceive: ((_data$message3 = data.message) === null || _data$message3 === void 0 ? void 0 : _data$message3.totalReceive) || 0\n      });\n    } catch (e) {\n      console.log('[FinanceProcess] ', {\n        e\n      });\n      messageError('202102271547');\n    }\n  };\n\n  useEffect(() => {\n    fetchData(); // eslint-disable-next-line\n  }, []);\n\n  const handleOpenDrawer = options => {\n    var _financialModalRef$cu;\n\n    console.log('[FinanceProcess] ', options, id);\n    (_financialModalRef$cu = financialModalRef.current) === null || _financialModalRef$cu === void 0 ? void 0 : _financialModalRef$cu.open(options, id);\n  };\n\n  const handleTableChange = useCallback((pagination, _, sorter) => {\n    var _sorter$column;\n\n    let internal_filters = filters;\n\n    if (sorter === null || sorter === void 0 ? void 0 : (_sorter$column = sorter.column) === null || _sorter$column === void 0 ? void 0 : _sorter$column.sorter) {\n      internal_filters = { ...internal_filters,\n        sort: {\n          order: sorter.order,\n          field: sorter.field\n        }\n      };\n    }\n\n    internal_filters = { ...internal_filters,\n      pagination: {\n        current_page: pagination.current || internal_filters.pagination.current_page,\n        page_size: pagination.pageSize || internal_filters.pagination.page_size\n      }\n    };\n    setFilters(old_filters => ({ ...old_filters,\n      ...internal_filters\n    }));\n  }, [filters]);\n  const filtered_data = useMemo(() => filterData({\n    data: financials,\n    filters,\n    columns_keys: []\n  }), [filters, financials]);\n  return /*#__PURE__*/React.createElement(PermissionsContainer, {\n    has_module: plan_modules === null || plan_modules === void 0 ? void 0 : plan_modules.Financial,\n    has_permission: permissions === null || permissions === void 0 ? void 0 : permissions.financial.read,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(MenuTop, {\n    activePage: \"financial\",\n    id: id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Totals, {\n    $color: \"#2D8F8A\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, \"Total Recebido \", currencyFormatter(totals.totalReceive, {\n    cents: true\n  })), /*#__PURE__*/React.createElement(Totals, {\n    $color: \"#FF4D4F\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, \"Total Pago \", currencyFormatter(totals.totalPay, {\n    cents: true\n  }))), /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    onClick: () => handleOpenDrawer(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, \"Nova movimenta\\xE7\\xE3o\")), /*#__PURE__*/React.createElement(FinancialTable, {\n    loading: loading,\n    financials: filtered_data,\n    setFinancials: setFinancials,\n    handleTableChange: handleTableChange,\n    handleOpenDrawer: handleOpenDrawer,\n    afterSave: fetchData,\n    header_height: 96,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(FinancialDrawer, {\n    afterSave: fetchData,\n    ref: financialModalRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  })));\n};\n\n__signature__(FinaceProcess, \"useParams{{ id }}\\nuseUserSelector{permissions}\\nuseUserSelector{plan_modules}\\nuseRef{financialModalRef}\\nuseState{[financials, setFinancials]([])}\\nuseState{[totals, setTotals]({ totalPay: 0, totalReceive: 0 })}\\nuseState{[filters, setFilters](initial_filters)}\\nuseGetProcessFinancial{[{ loading }, getFinancials]}\\nuseEffect{}\\nuseCallback{handleTableChange}\\nuseMemo{filtered_data}\", () => [useParams, useUserSelector, useUserSelector, useGetProcessFinancial]);\n\nFinaceProcess.displayName = \"FinaceProcess\";\nconst _default = FinaceProcess;\nexport default _default;\nconst Container = styled.div.withConfig({\n  displayName: \"FinanceProcess__Container\",\n  componentId: \"sc-1vbndh7-0\"\n})([\"height:calc(100vh - 5rem);padding:2rem;\"]);\nconst Header = styled.div.withConfig({\n  displayName: \"FinanceProcess__Header\",\n  componentId: \"sc-1vbndh7-1\"\n})([\"display:flex;justify-content:space-between;margin-bottom:10px;\"]);\nconst Totals = styled.div.withConfig({\n  displayName: \"FinanceProcess__Totals\",\n  componentId: \"sc-1vbndh7-2\"\n})([\"width:200px;display:flex;justify-content:center;align-items:center;border:1px solid \", \";color:\", \";padding:auto;margin-right:5px;\"], p => p.$color, p => p.$color);\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(initial_filters, \"initial_filters\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/NewProcess/Tabs/FinanceProcess/FinanceProcess.tsx\");\n  reactHotLoader.register(FinaceProcess, \"FinaceProcess\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/NewProcess/Tabs/FinanceProcess/FinanceProcess.tsx\");\n  reactHotLoader.register(Container, \"Container\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/NewProcess/Tabs/FinanceProcess/FinanceProcess.tsx\");\n  reactHotLoader.register(Header, \"Header\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/NewProcess/Tabs/FinanceProcess/FinanceProcess.tsx\");\n  reactHotLoader.register(Totals, \"Totals\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/NewProcess/Tabs/FinanceProcess/FinanceProcess.tsx\");\n  reactHotLoader.register(_default, \"default\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/NewProcess/Tabs/FinanceProcess/FinanceProcess.tsx\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/NewProcess/Tabs/FinanceProcess/FinanceProcess.tsx"],"names":["React","useCallback","useEffect","useMemo","useRef","useState","FinancialTable","useGetProcessFinancial","messageError","styled","Button","Row","useParams","currencyFormatter","MenuTop","FinancialDrawer","filterData","useUserSelector","PermissionsContainer","initial_filters","pagination","current_page","page_size","sort","field","order","FinaceProcess","id","permissions","state","plan_modules","company","plan","modules","financialModalRef","financials","setFinancials","totals","setTotals","totalPay","totalReceive","filters","setFilters","loading","getFinancials","fetchData","Financial","financial","read","data","message","dataFinancial","e","console","log","handleOpenDrawer","options","current","open","handleTableChange","_","sorter","internal_filters","column","pageSize","old_filters","filtered_data","columns_keys","cents","Container","div","Header","Totals","p","$color"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport FinancialTable from 'Pages/Financial/FinancialTable'\nimport useGetProcessFinancial from './useGetProcessFianancial'\nimport { FinancialType } from 'Pages/Financial/types'\nimport messageError from 'Utils/messageError'\nimport styled from 'styled-components'\nimport { Button, Row } from 'antd'\nimport { useParams } from 'react-router'\nimport { currencyFormatter } from 'Utils/formatters'\nimport MenuTop from 'Pages/NewProcess/MenuTop'\nimport FinancialDrawer, { FinancialDrawerType } from 'Components/Drawers/Financial/FinancialDrawer'\nimport { filterData, FiltersType } from 'Utils/functions'\nimport { TablePaginationConfig } from 'antd/es/table'\nimport { useUserSelector } from 'Redux/UserReducer'\nimport PermissionsContainer from 'Components/Permissions/Container'\n\nconst initial_filters: FiltersType = {\n  pagination: {\n    current_page: 1,\n    page_size: 20\n  },\n  sort: {\n    field: 'expirationDate',\n    order: 'ascend'\n  }\n}\n\nconst FinaceProcess: React.FC = () => {\n  const { id } = useParams()\n\n  const permissions = useUserSelector(state => state.permissions)\n  const plan_modules = useUserSelector(state => state.company?.plan.modules)\n\n  const financialModalRef = useRef<FinancialDrawerType>(null)\n\n  const [financials, setFinancials] = useState<FinancialType[]>([])\n  const [totals, setTotals] = useState({ totalPay: 0, totalReceive: 0 })\n  const [filters, setFilters] = useState<FiltersType>(initial_filters)\n\n  const [{ loading }, getFinancials] = useGetProcessFinancial(id)\n\n  const fetchData = async () => {\n    if (!plan_modules?.Financial || !permissions?.financial.read) return\n\n    try {\n      const { data } = await getFinancials()\n\n      setFinancials(data.message?.dataFinancial || [])\n      setTotals({ totalPay: data.message?.totalPay || 0, totalReceive: data.message?.totalReceive || 0 })\n    } catch (e) {\n      console.log('[FinanceProcess] ', { e })\n      messageError('202102271547')\n    }\n  }\n\n  useEffect(() => {\n    fetchData()\n    // eslint-disable-next-line\n  }, [])\n\n  const handleOpenDrawer: FinancialDrawerType['open'] = (options) => {\n    console.log('[FinanceProcess] ', options, id)\n    financialModalRef.current?.open(options, id)\n  }\n\n  const handleTableChange = useCallback((pagination: TablePaginationConfig, _: any, sorter: any): void => {\n    let internal_filters: FiltersType = filters\n\n    if (sorter?.column?.sorter) {\n      internal_filters = { ...internal_filters, sort: { order: sorter.order, field: sorter.field } }\n    }\n\n    internal_filters = {\n      ...internal_filters,\n      pagination: {\n        current_page: pagination.current || internal_filters!.pagination!.current_page,\n        page_size: pagination.pageSize || internal_filters!.pagination!.page_size\n      }\n    }\n\n    setFilters((old_filters) => ({ ...old_filters, ...internal_filters }))\n  }, [filters])\n\n  const filtered_data = useMemo(() => (\n    filterData({ data: financials, filters, columns_keys: [] })\n  ), [filters, financials])\n\n  return (\n    <PermissionsContainer has_module={plan_modules?.Financial} has_permission={permissions?.financial.read}>\n      <Container>\n        <MenuTop activePage=\"financial\" id={id}/>\n\n        <Header>\n          <Row>\n            <Totals $color=\"#2D8F8A\">\n              Total Recebido {currencyFormatter(totals.totalReceive, { cents: true })}\n            </Totals>\n\n            <Totals $color=\"#FF4D4F\">\n              Total Pago {currencyFormatter(totals.totalPay, { cents: true })}\n            </Totals>\n          </Row>\n\n          <Button type=\"primary\" onClick={() => handleOpenDrawer()}>Nova movimentação</Button>\n        </Header>\n\n        <FinancialTable\n          loading={loading}\n          financials={filtered_data}\n          setFinancials={setFinancials}\n          handleTableChange={handleTableChange}\n          handleOpenDrawer={handleOpenDrawer}\n          afterSave={fetchData}\n          header_height={96}\n        />\n\n        <FinancialDrawer afterSave={fetchData} ref={financialModalRef}/>\n      </Container>\n    </PermissionsContainer>\n  )\n}\n\nexport default FinaceProcess\n\nconst Container = styled.div`\n  height: calc(100vh - 5rem);\n  padding: 2rem;\n`\n\nconst Header = styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 10px;\n`\n\nconst Totals = styled.div<{ $color: string }>`\n  width: 200px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 1px solid ${p => p.$color};\n  color: ${p => p.$color};\n  padding: auto;\n  margin-right: 5px;\n`\n"]},"metadata":{},"sourceType":"module"}