{"ast":null,"code":"(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport { configure } from 'axios-hooks';\nimport { getToken } from 'Utils/user_token';\nimport { message } from 'antd';\nimport Axios from 'axios';\nimport errorModal from 'Utils/errorModal';\nimport store from 'Redux/UserReducer';\nconst {\n  dispatch\n} = store;\nconst baseURL = process.env.NODE_ENV === 'production' ? 'http://test.sistemadoperito.com.br/' : 'http://test.sistemadoperito.com.br/';\nconst DEFAULT_CONFIGURATION = {\n  baseURL: baseURL,\n  timeout: 60000\n};\nexport const setupAxios = () => {\n  const axios = Axios.create(DEFAULT_CONFIGURATION);\n  configure({\n    axios\n  });\n};\n\nconst logoutUser = raw_data => {\n  try {\n    const data = JSON.parse(raw_data);\n\n    if (!data.success && data.key === 'erro_token') {\n      localStorage.removeItem('token');\n      setTimeout(message.destroy, 100);\n      errorModal({\n        content: data.message\n      }, 3000);\n      setTimeout(() => window.location.href = '/login', 2500);\n    }\n\n    if (!data.success && data.key === 'trial_off' && !window.location.href.includes('/plans')) {\n      setTimeout(message.destroy, 100);\n      errorModal({\n        content: data.message\n      }, 2500);\n      setTimeout(() => window.location.href = '/plans', 2500);\n    }\n\n    if (!data.success && data.key === 'payment_open') {\n      if (!window.location.href.includes('/billing')) {\n        dispatch({\n          type: 'SET_HAS_OPEN_PAYMENTS',\n          payload: true\n        });\n        setTimeout(message.destroy, 100);\n        errorModal({\n          content: data.message\n        }, 3000);\n        setTimeout(() => window.location.href = '/billing', 2500);\n      }\n    }\n  } catch (error) {\n    /* ignore error */\n  }\n\n  return raw_data;\n};\n\nexport const setAxiosToken = () => {\n  var _getToken;\n\n  let transform_response = Axios.defaults.transformResponse;\n  if (transform_response === undefined) transform_response = [];\n  if (!Array.isArray(transform_response)) transform_response = [transform_response];\n  const token = (_getToken = getToken()) === null || _getToken === void 0 ? void 0 : _getToken.token;\n  const axios = Axios.create({ ...DEFAULT_CONFIGURATION,\n    headers: {\n      authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json'\n    },\n    transformResponse: [raw_data => logoutUser(raw_data), ...transform_response]\n  });\n  configure({\n    axios\n  });\n};\nconst api = Axios.create({ ...DEFAULT_CONFIGURATION\n});\nconst _default = api;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(dispatch, \"dispatch\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Utils/axios_configuration.ts\");\n  reactHotLoader.register(baseURL, \"baseURL\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Utils/axios_configuration.ts\");\n  reactHotLoader.register(DEFAULT_CONFIGURATION, \"DEFAULT_CONFIGURATION\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Utils/axios_configuration.ts\");\n  reactHotLoader.register(setupAxios, \"setupAxios\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Utils/axios_configuration.ts\");\n  reactHotLoader.register(logoutUser, \"logoutUser\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Utils/axios_configuration.ts\");\n  reactHotLoader.register(setAxiosToken, \"setAxiosToken\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Utils/axios_configuration.ts\");\n  reactHotLoader.register(api, \"api\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Utils/axios_configuration.ts\");\n  reactHotLoader.register(_default, \"default\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Utils/axios_configuration.ts\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Utils/axios_configuration.ts"],"names":["configure","getToken","message","Axios","errorModal","store","dispatch","baseURL","process","env","NODE_ENV","DEFAULT_CONFIGURATION","timeout","setupAxios","axios","create","logoutUser","raw_data","data","JSON","parse","success","key","localStorage","removeItem","setTimeout","destroy","content","window","location","href","includes","type","payload","error","setAxiosToken","transform_response","defaults","transformResponse","undefined","Array","isArray","token","headers","authorization","api"],"mappings":";;;;;;;;;AAAA,SAASA,SAAT,QAA0B,aAA1B;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,SAASC,OAAT,QAAwB,MAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,OAAOC,KAAP,MAAkB,mBAAlB;AAEA,MAAM;AAAEC,EAAAA;AAAF,IAAeD,KAArB;AAEA,MAAME,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GACZ,qCADY,GAEZ,qCAFJ;AAIA,MAAMC,qBAAqB,GAAG;AAC5BJ,EAAAA,OAAO,EAAEA,OADmB;AAE5BK,EAAAA,OAAO,EAAE;AAFmB,CAA9B;AAKA,OAAO,MAAMC,UAAU,GAAG,MAAM;AAC9B,QAAMC,KAAK,GAAGX,KAAK,CAACY,MAAN,CAAaJ,qBAAb,CAAd;AAEAX,EAAAA,SAAS,CAAC;AAAEc,IAAAA;AAAF,GAAD,CAAT;AACD,CAJM;;AAMP,MAAME,UAAU,GAAIC,QAAD,IAAmB;AACpC,MAAI;AACF,UAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWH,QAAX,CAAb;;AAEA,QAAI,CAACC,IAAI,CAACG,OAAN,IAAiBH,IAAI,CAACI,GAAL,KAAa,YAAlC,EAAgD;AAC9CC,MAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACAC,MAAAA,UAAU,CAACvB,OAAO,CAACwB,OAAT,EAAkB,GAAlB,CAAV;AACAtB,MAAAA,UAAU,CAAC;AAAEuB,QAAAA,OAAO,EAAET,IAAI,CAAChB;AAAhB,OAAD,EAA4B,IAA5B,CAAV;AACAuB,MAAAA,UAAU,CAAC,MAAMG,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,QAA9B,EAAwC,IAAxC,CAAV;AACD;;AAED,QAAI,CAACZ,IAAI,CAACG,OAAN,IAAiBH,IAAI,CAACI,GAAL,KAAa,WAA9B,IAA6C,CAACM,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,QAArB,CAA8B,QAA9B,CAAlD,EAA2F;AACzFN,MAAAA,UAAU,CAACvB,OAAO,CAACwB,OAAT,EAAkB,GAAlB,CAAV;AACAtB,MAAAA,UAAU,CAAC;AAAEuB,QAAAA,OAAO,EAAET,IAAI,CAAChB;AAAhB,OAAD,EAA4B,IAA5B,CAAV;AACAuB,MAAAA,UAAU,CAAC,MAAMG,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,QAA9B,EAAwC,IAAxC,CAAV;AACD;;AAED,QAAI,CAACZ,IAAI,CAACG,OAAN,IAAiBH,IAAI,CAACI,GAAL,KAAa,cAAlC,EAAkD;AAChD,UAAI,CAACM,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,QAArB,CAA8B,UAA9B,CAAL,EAAgD;AAC9CzB,QAAAA,QAAQ,CAAC;AAAE0B,UAAAA,IAAI,EAAE,uBAAR;AAAiCC,UAAAA,OAAO,EAAE;AAA1C,SAAD,CAAR;AACAR,QAAAA,UAAU,CAACvB,OAAO,CAACwB,OAAT,EAAkB,GAAlB,CAAV;AACAtB,QAAAA,UAAU,CAAC;AAAEuB,UAAAA,OAAO,EAAET,IAAI,CAAChB;AAAhB,SAAD,EAA4B,IAA5B,CAAV;AACAuB,QAAAA,UAAU,CAAC,MAAMG,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,UAA9B,EAA0C,IAA1C,CAAV;AACD;AACF;AACF,GAxBD,CAwBE,OAAOI,KAAP,EAAc;AAAE;AAAoB;;AAEtC,SAAOjB,QAAP;AACD,CA5BD;;AA8BA,OAAO,MAAMkB,aAAa,GAAG,MAAM;AAAA;;AACjC,MAAIC,kBAAkB,GAAGjC,KAAK,CAACkC,QAAN,CAAeC,iBAAxC;AACA,MAAIF,kBAAkB,KAAKG,SAA3B,EAAsCH,kBAAkB,GAAG,EAArB;AACtC,MAAI,CAACI,KAAK,CAACC,OAAN,CAAcL,kBAAd,CAAL,EAAwCA,kBAAkB,GAAG,CAACA,kBAAD,CAArB;AACxC,QAAMM,KAAK,gBAAGzC,QAAQ,EAAX,8CAAG,UAAYyC,KAA1B;AAEA,QAAM5B,KAAK,GAAGX,KAAK,CAACY,MAAN,CAAa,EACzB,GAAGJ,qBADsB;AAEzBgC,IAAAA,OAAO,EAAE;AAAEC,MAAAA,aAAa,EAAG,UAASF,KAAM,EAAjC;AAAoC,sBAAgB;AAApD,KAFgB;AAGzBJ,IAAAA,iBAAiB,EAAE,CAChBrB,QAAD,IAAcD,UAAU,CAACC,QAAD,CADP,EAEjB,GAAGmB,kBAFc;AAHM,GAAb,CAAd;AASApC,EAAAA,SAAS,CAAC;AAAEc,IAAAA;AAAF,GAAD,CAAT;AACD,CAhBM;AAkBP,MAAM+B,GAAG,GAAG1C,KAAK,CAACY,MAAN,CAAa,EAAE,GAAGJ;AAAL,CAAb,CAAZ;iBAEekC,G;AAAf;;;;;;;;;;0BAnEQvC,Q;0BAEFC,O;0BAIAI,qB;0BAKOE,U;0BAMPG,U;0BA8BOmB,a;0BAkBPU,G","sourcesContent":["import { configure } from 'axios-hooks'\nimport { getToken } from 'Utils/user_token'\nimport { message } from 'antd'\nimport Axios from 'axios'\nimport errorModal from 'Utils/errorModal'\nimport store from 'Redux/UserReducer'\n\nconst { dispatch } = store\n\nconst baseURL = process.env.NODE_ENV === 'production'\n  ? 'http://test.sistemadoperito.com.br/'\n  : 'http://test.sistemadoperito.com.br/'\n\nconst DEFAULT_CONFIGURATION = {\n  baseURL: baseURL,\n  timeout: 60000,\n}\n\nexport const setupAxios = () => {\n  const axios = Axios.create(DEFAULT_CONFIGURATION)\n\n  configure({ axios })\n}\n\nconst logoutUser = (raw_data: any) => {\n  try {\n    const data = JSON.parse(raw_data)\n\n    if (!data.success && data.key === 'erro_token') {\n      localStorage.removeItem('token')\n      setTimeout(message.destroy, 100)\n      errorModal({ content: data.message }, 3000)\n      setTimeout(() => window.location.href = '/login', 2500)\n    }\n\n    if (!data.success && data.key === 'trial_off' && !window.location.href.includes('/plans')) {\n      setTimeout(message.destroy, 100)\n      errorModal({ content: data.message }, 2500)\n      setTimeout(() => window.location.href = '/plans', 2500)\n    }\n\n    if (!data.success && data.key === 'payment_open') {\n      if (!window.location.href.includes('/billing')) {\n        dispatch({ type: 'SET_HAS_OPEN_PAYMENTS', payload: true })\n        setTimeout(message.destroy, 100)\n        errorModal({ content: data.message }, 3000)\n        setTimeout(() => window.location.href = '/billing', 2500)\n      }\n    }\n  } catch (error) { /* ignore error */ }\n\n  return raw_data\n}\n\nexport const setAxiosToken = () => {\n  let transform_response = Axios.defaults.transformResponse\n  if (transform_response === undefined) transform_response = []\n  if (!Array.isArray(transform_response)) transform_response = [transform_response]\n  const token = getToken()?.token\n\n  const axios = Axios.create({\n    ...DEFAULT_CONFIGURATION,\n    headers: { authorization: `Bearer ${token}`, 'Content-Type': 'application/json' },\n    transformResponse: [\n      (raw_data) => logoutUser(raw_data),\n      ...transform_response\n    ]\n  })\n\n  configure({ axios })\n}\n\nconst api = Axios.create({ ...DEFAULT_CONFIGURATION })\n\nexport default api\n"]},"metadata":{},"sourceType":"module"}