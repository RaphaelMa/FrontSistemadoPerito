{"ast":null,"code":"import _objectSpread from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectDestructuringEmpty from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty\";import React,{forwardRef,useEffect,useImperativeHandle,useState}from'react';import{Card,Checkbox,Divider,Form,message,Modal,Spin,Tooltip}from'antd';import{useUserDispatch,useUserSelector}from'Redux/UserReducer';import{useGetPaymentType,useSaveHire}from'./useHelpers';import{useNavigate}from'react-router-dom';import useSaveCompany from'Pages/Company/useSaveCompany';import CompanyForm from'Pages/Company/CompanyForm';import successModal from'Utils/successModal';import messageError from'Utils/messageError';import styled from'styled-components';import Cards from'Assets/cards.png';import Boleto from'Assets/boleto.png';// eslint-disable-next-line no-empty-pattern\nvar PaymentMethodModal=function PaymentMethodModal(_ref,ref){_objectDestructuringEmpty(_ref);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),visible=_useState2[0],setVisible=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),plan=_useState4[0],setPlan=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),payment_type=_useState6[0],setPaymentType=_useState6[1];var navigate=useNavigate();var _useUserSelector=useUserSelector(function(state){return state;}),company=_useUserSelector.company;var _useSaveCompany=useSaveCompany(),_useSaveCompany2=_slicedToArray(_useSaveCompany,2),saveCompany=_useSaveCompany2[0],saving=_useSaveCompany2[1].loading;var _useGetPaymentType=useGetPaymentType(),_useGetPaymentType2=_slicedToArray(_useGetPaymentType,2),payment_type_loading=_useGetPaymentType2[0].loading,getPaymentType=_useGetPaymentType2[1];var _useSaveHire=useSaveHire(),_useSaveHire2=_slicedToArray(_useSaveHire,2),saving_hire=_useSaveHire2[0].loading,saveHire=_useSaveHire2[1];var dispatch=useUserDispatch();var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var fetchPaymentType=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$getPaymentType,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getPaymentType();case 3:_yield$getPaymentType=_context.sent;data=_yield$getPaymentType.data;if(data===null||data===void 0?void 0:data.length){_context.next=7;break;}return _context.abrupt(\"return\");case 7:setPaymentType(data);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);messageError('2011140057');case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function fetchPaymentType(){return _ref2.apply(this,arguments);};}();useEffect(function(){if(visible)fetchPaymentType();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[visible]);var open=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref3){var plan,company_data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:plan=_ref3.plan;company_data={_id:company===null||company===void 0?void 0:company._id,active:true,name:company===null||company===void 0?void 0:company.name,email:company===null||company===void 0?void 0:company.email,kindCompany_id:company===null||company===void 0?void 0:company.kindCompany_id,cellPhone:company===null||company===void 0?void 0:company.cellPhone,document:company===null||company===void 0?void 0:company.document,cep:company===null||company===void 0?void 0:company.cep,state:company===null||company===void 0?void 0:company.state,city:company===null||company===void 0?void 0:company.city,neighborhood:company===null||company===void 0?void 0:company.neighborhood,address:company===null||company===void 0?void 0:company.address,addressNumber:company===null||company===void 0?void 0:company.addressNumber};form.setFieldsValue(company_data);setPlan(_objectSpread({},plan));setVisible(true);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function open(_x){return _ref4.apply(this,arguments);};}();var close=function close(){return setVisible(false);};useImperativeHandle(ref,function(){return{open:open,close:close};});var handleSaveHire=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var typePayment_id,_yield$saveHire,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:typePayment_id=payment_type.find(function(payment){return payment.description==='Boleto';});_context3.prev=1;_context3.next=4;return saveHire({data:{typePayment_id:typePayment_id}});case 4:_yield$saveHire=_context3.sent;data=_yield$saveHire.data;if(data===null||data===void 0?void 0:data.success){_context3.next=9;break;}message.error(data.message);return _context3.abrupt(\"return\");case 9:successModal({content:/*#__PURE__*/React.createElement(TextContainer,null,/*#__PURE__*/React.createElement(\"p\",null,\"Contrata\\xE7\\xE3o realizada com sucesso\"),/*#__PURE__*/React.createElement(\"p\",null,\"Dentro de alguns minutos voc\\xEA receber\\xE1 o boleto para pagamento em seu e-mail!\")),duration:5000,onEndDuration:function onEndDuration(){close();return navigate('/');}});_context3.next=15;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](1);messageError('2011140157');case 15:case\"end\":return _context3.stop();}}},_callee3,null,[[1,12]]);}));return function handleSaveHire(){return _ref5.apply(this,arguments);};}();var handleSaveCompany=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(raw_values){var values,_yield$saveCompany,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;values=_objectSpread({},raw_values,{plan_id:plan===null||plan===void 0?void 0:plan._id,annual:plan===null||plan===void 0?void 0:plan.annual});_context4.next=4;return saveCompany(values);case 4:_yield$saveCompany=_context4.sent;data=_yield$saveCompany.data;if(data===null||data===void 0?void 0:data.success){_context4.next=9;break;}message.error(data.message);return _context4.abrupt(\"return\");case 9:dispatch({type:'UPDATE_COMPANY',payload:data.company});handleSaveHire();_context4.next=16;break;case 13:_context4.prev=13;_context4.t0=_context4[\"catch\"](0);messageError('2011140156');case 16:case\"end\":return _context4.stop();}}},_callee4,null,[[0,13]]);}));return function handleSaveCompany(_x2){return _ref6.apply(this,arguments);};}();var handleHire=function handleHire(){form.validateFields().then(function(values){return handleSaveCompany(values);});};return/*#__PURE__*/React.createElement(Modal,{visible:visible,closable:false,okText:\"Finalizar\",cancelText:\"Fechar\",onOk:handleHire,onCancel:close,centered:true,width:\"90%\"},/*#__PURE__*/React.createElement(Spin,{spinning:saving||payment_type_loading||saving_hire},/*#__PURE__*/React.createElement(Form,{form:form,layout:\"vertical\"},/*#__PURE__*/React.createElement(Content,null,/*#__PURE__*/React.createElement(CompanyForm,{width:49,setFieldsValue:form.setFieldsValue}),/*#__PURE__*/React.createElement(StyledCard,null,/*#__PURE__*/React.createElement(Divider,{orientation:\"left\",style:{marginBottom:40}},\"Forma de Pagamento\"),/*#__PURE__*/React.createElement(PaymentMethodContainer,null,/*#__PURE__*/React.createElement(MethodCard,null,/*#__PURE__*/React.createElement(Image,{src:Boleto}),/*#__PURE__*/React.createElement(CheckboxStyled,{checked:true})),/*#__PURE__*/React.createElement(Tooltip,{title:\"Em breve\"},/*#__PURE__*/React.createElement(MethodCard,{style:{cursor:'not-allowed'}},/*#__PURE__*/React.createElement(Image,{src:Cards}),/*#__PURE__*/React.createElement(CheckboxStyled,{disabled:true,checked:false})))))))));};PaymentMethodModal.displayName=\"PaymentMethodModal\";export default forwardRef(PaymentMethodModal);var Content=styled.div.withConfig({displayName:\"PaymentMethodModal__Content\",componentId:\"sc-1r0ohgw-0\"})([\"justify-content:space-between;overflow-y:auto;overflow-x:hidden;display:flex;flex-direction:row;\"]);var StyledCard=styled(Card).withConfig({displayName:\"PaymentMethodModal__StyledCard\",componentId:\"sc-1r0ohgw-1\"})([\"width:49%;height:100%;.ant-divider.ant-divider-horizontal{margin-top:0;}\"]);var PaymentMethodContainer=styled.div.withConfig({displayName:\"PaymentMethodModal__PaymentMethodContainer\",componentId:\"sc-1r0ohgw-2\"})([\"width:100%;display:flex;flex-direction:row;align-items:center;justify-content:space-evenly;\"]);var MethodCard=styled.div.withConfig({displayName:\"PaymentMethodModal__MethodCard\",componentId:\"sc-1r0ohgw-3\"})([\"padding:10px 30px 30px;display:flex;flex-direction:column;align-items:center;justify-content:center;\"]);var Image=styled.img.withConfig({displayName:\"PaymentMethodModal__Image\",componentId:\"sc-1r0ohgw-4\"})([\"width:100px;height:65px;\"]);var CheckboxStyled=styled(Checkbox).withConfig({displayName:\"PaymentMethodModal__CheckboxStyled\",componentId:\"sc-1r0ohgw-5\"})([\"margin-top:10px;\"]);var TextContainer=styled.div.withConfig({displayName:\"PaymentMethodModal__TextContainer\",componentId:\"sc-1r0ohgw-6\"})([\"display:flex;flex-direction:column;text-align:center;font-size:16px;\"]);","map":null,"metadata":{},"sourceType":"module"}