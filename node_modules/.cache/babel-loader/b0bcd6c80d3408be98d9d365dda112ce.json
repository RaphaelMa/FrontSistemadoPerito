{"ast":null,"code":"import _slicedToArray from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useMemo,useState,useRef}from'react';import{DatePicker,Input,Row,Col}from'antd';import MovimentsTable from'./MovementsTable';import moment from'moment';import Fuse from'fuse.js';var FUSE_OPTIONS={threshold:0.4,isCaseSensitive:false,findAllMatches:true,keys:['description']};var Movements=function Movements(_ref){var movements=_ref.movements;var searchDelay=useRef(null);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),start_date=_useState2[0],setStartDate=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),end_date=_useState4[0],setEndDate=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),search=_useState6[0],setSearch=_useState6[1];var filter_by_date=useMemo(function(){return movements===null||movements===void 0?void 0:movements.filter(function(movement){if(!start_date||!end_date||!(movement===null||movement===void 0?void 0:movement.movementDate))return true;var date=moment(movement.movementDate,'YYYY-MM-DD');return date.isBetween(start_date,end_date)||date.isSame(start_date)||date.isSame(end_date);});},[end_date,movements,start_date]);var filtered_movements=useMemo(function(){if(!search||!filter_by_date)return filter_by_date;var fuse=new Fuse(filter_by_date,FUSE_OPTIONS);return fuse.search(search).map(function(item){return item.item;});},[filter_by_date,search]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,{gutter:8,style:{marginBottom:'10px'}},/*#__PURE__*/React.createElement(Col,{flex:\"1 0 305\"},/*#__PURE__*/React.createElement(DatePicker.RangePicker,{format:\"DD/MM/YYYY\",onChange:function onChange(values){var _values$,_values$2;setStartDate((values===null||values===void 0?void 0:(_values$=values[0])===null||_values$===void 0?void 0:_values$.startOf('day'))||null);setEndDate((values===null||values===void 0?void 0:(_values$2=values[1])===null||_values$2===void 0?void 0:_values$2.startOf('day'))||null);}})),/*#__PURE__*/React.createElement(Col,{flex:\"1\"},/*#__PURE__*/React.createElement(Input,{onChange:function onChange(event){var value=event.target.value;if(searchDelay.current)clearTimeout(searchDelay.current);searchDelay.current=setTimeout(function(){return setSearch(value);},300);},placeholder:\"Procure pela descri\\xE7\\xE3o\"}))),/*#__PURE__*/React.createElement(MovimentsTable,{movements:filtered_movements}));};export default Movements;","map":null,"metadata":{},"sourceType":"module"}