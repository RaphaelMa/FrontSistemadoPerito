{"ast":null,"code":"import _regeneratorRuntime from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/raphael/Documents/Github/FrontSistemadoPerito/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{memo,useEffect,useState}from'react';import{Button,Checkbox,Col,Form,Input,message,Row,Select}from'antd';import styled from'styled-components';import{theme}from'Styles/theme';import messageError from'Utils/messageError';import{useUserRegistration,useGetAreas}from'./useGetData';import{useUserSelector,useUserDispatch}from'Redux/UserReducer';import{normalizePhone}from'Utils/functions';import{Navigate}from'react-router';import PhoneInput from'Utils/PhoneInput';import successModal from'Utils/successModal';var initial_values={name:'',email:'',password:'',confirm_password:'',cellPhone:'',areaId:'',accept:false};var RegisterForm=function RegisterForm(){var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var is_authenticated=useUserSelector(function(state){return state.is_authenticated;});var _useState=useState([]),_useState2=_slicedToArray(_useState,2),areas=_useState2[0],setAreas=_useState2[1];var _useGetAreas=useGetAreas(),_useGetAreas2=_slicedToArray(_useGetAreas,2),area_loading=_useGetAreas2[0].loading,getAreas=_useGetAreas2[1];var dispatch=useUserDispatch();var fetchAreas=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$getAreas,data,_data,first_area;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getAreas();case 3:_yield$getAreas=_context.sent;data=_yield$getAreas.data;setAreas(data);_data=_slicedToArray(data,1),first_area=_data[0];form.setFieldsValue({areaId:first_area._id});_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);message.error('Não foi possível listar as areas de atuação. Recarregue a página e tente novamente. '+'Se persistir o erro entre em contato conosco pelo código: 2008202138');case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function fetchAreas(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchAreas();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var _useUserRegistration=useUserRegistration(),_useUserRegistration2=_slicedToArray(_useUserRegistration,2),loading=_useUserRegistration2[0].loading,userRegister=_useUserRegistration2[1];var handleSave=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref2){var name,email,password,cellPhone,areaId,accept,_yield$userRegister,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:name=_ref2.name,email=_ref2.email,password=_ref2.password,cellPhone=_ref2.cellPhone,areaId=_ref2.areaId,accept=_ref2.accept;_context2.prev=1;_context2.next=4;return userRegister({data:{name:name,email:email,password:password,cellPhone:cellPhone,areaId:areaId,accept:accept}});case 4:_yield$userRegister=_context2.sent;data=_yield$userRegister.data;if(data.success){_context2.next=9;break;}message.error(data.message);return _context2.abrupt(\"return\");case 9:successModal({content:'Conta salva com sucesso'});dispatch({type:'LOGIN',payload:{token:data.token,remember:false}});_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](1);messageError('2208202350');case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[1,13]]);}));return function handleSave(_x){return _ref3.apply(this,arguments);};}();if(is_authenticated){message.destroy();return/*#__PURE__*/React.createElement(Navigate,{to:\"/\"});}return/*#__PURE__*/React.createElement(Form,{form:form,name:\"register\",layout:\"vertical\",scrollToFirstError:true,onFinish:handleSave,initialValues:initial_values},/*#__PURE__*/React.createElement(RowStyled,null,/*#__PURE__*/React.createElement(ColStyled,null,/*#__PURE__*/React.createElement(Form.Item,{name:\"name\",validateTrigger:['onBlur','onChange'],rules:[{validateTrigger:'onChange',required:true,message:'Campo obrigatório'},{validateTrigger:'onBlur',type:'string',message:'Nome não pode ficar em branco.'}]},/*#__PURE__*/React.createElement(Input,{placeholder:\"Nome completo\"}))),/*#__PURE__*/React.createElement(ColStyled,null,/*#__PURE__*/React.createElement(Form.Item,{name:\"email\",validateTrigger:['onBlur','onChange'],rules:[{validateTrigger:'onChange',required:true,message:'Campo obrigatório'},{validateTrigger:'onBlur',type:'email',message:'Email inválido'}]},/*#__PURE__*/React.createElement(Input,{placeholder:\"E-mail\"})))),/*#__PURE__*/React.createElement(RowStyled,null,/*#__PURE__*/React.createElement(ColStyled,null,/*#__PURE__*/React.createElement(Form.Item,{name:\"password\",validateTrigger:['onBlur','onChange'],rules:[{validateTrigger:'onChange',required:true,message:'Campo obrigatório'},{validateTrigger:'onBlur',min:6,message:'Deve possuir ao menos 6 caracteres'}],hasFeedback:true},/*#__PURE__*/React.createElement(Input.Password,{placeholder:\"Senha\"}))),/*#__PURE__*/React.createElement(ColStyled,null,/*#__PURE__*/React.createElement(Form.Item,{name:\"confirm_password\",dependencies:['password'],validateTrigger:['onBlur','onChange'],hasFeedback:true,rules:[{validateTrigger:'onChange',required:true,message:'Campo obrigatório'},{validateTrigger:'onBlur',min:6,message:'Deve possuir ao menos 6 caracteres'},function(_ref4){var getFieldValue=_ref4.getFieldValue;return{validator:function validator(rule,value){if(!value||getFieldValue('password')===value){return Promise.resolve();}return Promise.reject('As senhas informadas são diferentes!');}};}]},/*#__PURE__*/React.createElement(Input.Password,{placeholder:\"Confirme sua senha\"})))),/*#__PURE__*/React.createElement(RowStyled,null,/*#__PURE__*/React.createElement(ColStyled,null,/*#__PURE__*/React.createElement(Form.Item,{name:\"cellPhone\",validateTrigger:['onBlur','onChange'],rules:[{validateTrigger:'onChange',required:true,message:'Campo obrigatório'},{validateTrigger:'onBlur',min:10,message:'Informe um telefone válido.'}],normalize:normalizePhone},/*#__PURE__*/React.createElement(PhoneInput,null))),/*#__PURE__*/React.createElement(ColStyled,null,/*#__PURE__*/React.createElement(Form.Item,{name:\"areaId\",validateTrigger:['onBlur','onChange'],rules:[{validateTrigger:'onChange',required:true,message:'Informe sua área de atuação.'}]},/*#__PURE__*/React.createElement(Select,{loading:area_loading,style:{width:'100%'},placeholder:\"\\xC1rea de atua\\xE7\\xE3o\"},areas.map(function(area){return/*#__PURE__*/React.createElement(Select.Option,{key:area._id,value:area._id},area.description);}))))),/*#__PURE__*/React.createElement(RowStyled,null,/*#__PURE__*/React.createElement(Col,{xs:24,md:12,lg:8,xl:6},/*#__PURE__*/React.createElement(Button,{htmlType:\"submit\",type:\"primary\",style:{width:'100%'},color:theme.colors.primary,loading:loading},\"Cadastrar\"))),/*#__PURE__*/React.createElement(RowStyled,{style:{marginTop:8}},/*#__PURE__*/React.createElement(Form.Item,{name:\"accept\",validateTrigger:['onBlur','onChange'],valuePropName:\"checked\",rules:[{validator:function validator(_,value){return value?Promise.resolve():Promise.reject('É preciso aceitar os termos de uso.');}}]},/*#__PURE__*/React.createElement(Checkbox,null,\"Declaro que li e aceito os \\xA0\",/*#__PURE__*/React.createElement(\"a\",{target:\"_blank\",rel:\"noopener noreferrer\",href:\"https://www.eventbrite.com.br/support/articles/pt_BR/Troubleshooting/termos-de-uso-da-api-da-eventbrite?lg=pt_BR\"},\"termos de uso\")))));};RegisterForm.displayName=\"RegisterForm\";export default memo(RegisterForm);var RowStyled=styled(Row).attrs({justify:'center',gutter:[22,0]}).withConfig({displayName:\"RegisterForm__RowStyled\",componentId:\"r1oc4i-0\"})([\"\"]);var ColStyled=styled(Col).attrs({xs:24,md:16,lg:12,xl:12,xxl:8}).withConfig({displayName:\"RegisterForm__ColStyled\",componentId:\"r1oc4i-1\"})([\"\"]);","map":null,"metadata":{},"sourceType":"module"}