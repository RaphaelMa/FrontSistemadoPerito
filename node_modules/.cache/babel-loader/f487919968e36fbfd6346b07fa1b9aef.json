{"ast":null,"code":"var _jsxFileName = \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/NewProcess/Tabs/ProcessHistory/ProcessHistory.tsx\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport PermissionsContainer from '../../../../Components/Permissions/Container';\nimport MenuTop from '../../MenuTop';\nimport { useUserSelector } from '../../../../Redux/UserReducer';\nimport { useParams } from 'react-router-dom';\nimport useGetProcessHistory from './useGetProcessHistory';\nimport messageError from '../../../../Utils/messageError';\nimport HistoryTable from '../../../History/HistoryTable';\nimport styled from 'styled-components';\n\nconst ProcessHistory = () => {\n  const [process_history, setProcessHistory] = useState([]);\n  const plan_modules = useUserSelector(state => {\n    var _state$company;\n\n    return (_state$company = state.company) === null || _state$company === void 0 ? void 0 : _state$company.plan.modules;\n  });\n  const permissions = useUserSelector(state => state.permissions);\n  const {\n    id\n  } = useParams();\n  const [{\n    loading\n  }, getProcessHistory] = useGetProcessHistory();\n\n  const loadProcessHistory = async () => {\n    if (!id) return;\n\n    try {\n      const {\n        data\n      } = await getProcessHistory(id);\n      if (!data) return; // const fake_data = []\n      //\n      // for(let i=0; i < 100; i++) {\n      //   fake_data.push({...data[0], _id: String(data[0]._id + i) })\n      // }\n      //\n      // setProcessHistory(fake_data)\n\n      setProcessHistory(data);\n    } catch (e) {\n      messageError('2702211644');\n      console.log(e);\n    }\n  };\n\n  useEffect(() => {\n    loadProcessHistory(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const has_permissions = !!id && (permissions === null || permissions === void 0 ? void 0 : permissions.plan.update) || !id && (permissions === null || permissions === void 0 ? void 0 : permissions.process.create);\n  const divRef = useRef(null);\n  return /*#__PURE__*/React.createElement(PermissionsContainer, {\n    has_module: plan_modules === null || plan_modules === void 0 ? void 0 : plan_modules.Process,\n    has_permission: has_permissions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ContainerStyled, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(MenuTop, {\n    activePage: \"history\",\n    id: id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(TableContainer, {\n    ref: divRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(HistoryTable, {\n    data: process_history,\n    loading: loading,\n    divRef: divRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }))));\n};\n\n__signature__(ProcessHistory, \"useState{[process_history, setProcessHistory]([])}\\nuseUserSelector{plan_modules}\\nuseUserSelector{permissions}\\nuseParams{{ id }}\\nuseGetProcessHistory{[{ loading }, getProcessHistory]}\\nuseEffect{}\\nuseRef{divRef}\", () => [useUserSelector, useUserSelector, useParams, useGetProcessHistory]);\n\nProcessHistory.displayName = \"ProcessHistory\";\nconst _default = ProcessHistory;\nexport default _default;\nconst ContainerStyled = styled.div.withConfig({\n  displayName: \"ProcessHistory__ContainerStyled\",\n  componentId: \"sc-1blaujs-0\"\n})([\"overflow-y:hidden;overflow-x:hidden;padding:2rem;height:calc(100% - 2rem);\"]);\nconst TableContainer = styled.div.withConfig({\n  displayName: \"ProcessHistory__TableContainer\",\n  componentId: \"sc-1blaujs-1\"\n})([\"display:flex;margin:0;height:100%;\"]);\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(ProcessHistory, \"ProcessHistory\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/NewProcess/Tabs/ProcessHistory/ProcessHistory.tsx\");\n  reactHotLoader.register(ContainerStyled, \"ContainerStyled\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/NewProcess/Tabs/ProcessHistory/ProcessHistory.tsx\");\n  reactHotLoader.register(TableContainer, \"TableContainer\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/NewProcess/Tabs/ProcessHistory/ProcessHistory.tsx\");\n  reactHotLoader.register(_default, \"default\", \"/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/NewProcess/Tabs/ProcessHistory/ProcessHistory.tsx\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/raphael/Documents/Github/FrontSistemadoPerito/src/Pages/NewProcess/Tabs/ProcessHistory/ProcessHistory.tsx"],"names":["React","useEffect","useState","useRef","PermissionsContainer","MenuTop","useUserSelector","useParams","useGetProcessHistory","messageError","HistoryTable","styled","ProcessHistory","process_history","setProcessHistory","plan_modules","state","company","plan","modules","permissions","id","loading","getProcessHistory","loadProcessHistory","data","e","console","log","has_permissions","update","process","create","divRef","Process","ContainerStyled","div","TableContainer"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from 'react'\nimport PermissionsContainer from '../../../../Components/Permissions/Container'\nimport MenuTop from '../../MenuTop'\nimport { useUserSelector } from '../../../../Redux/UserReducer'\nimport { useParams } from 'react-router-dom'\nimport useGetProcessHistory from './useGetProcessHistory'\nimport messageError from '../../../../Utils/messageError'\nimport { HistoryType } from 'Pages/History/types'\nimport HistoryTable from '../../../History/HistoryTable'\nimport styled from 'styled-components'\n\nconst ProcessHistory: React.FC = () => {\n  const [process_history, setProcessHistory] = useState<HistoryType[]>([])\n  const plan_modules = useUserSelector(state => state.company?.plan.modules)\n  const permissions = useUserSelector(state => state.permissions)\n\n  const { id } = useParams()\n\n  const [{ loading }, getProcessHistory] = useGetProcessHistory()\n\n\n  const loadProcessHistory = async () => {\n    if (!id) return\n\n    try {\n      const { data } = await getProcessHistory(id)\n\n      if (!data) return\n      // const fake_data = []\n      //\n      // for(let i=0; i < 100; i++) {\n      //   fake_data.push({...data[0], _id: String(data[0]._id + i) })\n      // }\n      //\n      // setProcessHistory(fake_data)\n      setProcessHistory(data)\n    } catch (e) {\n      messageError('2702211644')\n      console.log(e)\n    }\n  }\n\n  useEffect(() => {\n    loadProcessHistory()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const has_permissions = (!!id && permissions?.plan.update) || (!id && permissions?.process.create)\n\n  const divRef = useRef<HTMLDivElement>(null)\n\n  return (\n    <PermissionsContainer has_module={plan_modules?.Process} has_permission={has_permissions}>\n      <ContainerStyled>\n        <MenuTop activePage=\"history\" id={id}/>\n\n        <TableContainer ref={divRef}>\n          <HistoryTable\n            data={process_history}\n            loading={loading}\n            divRef={divRef}\n          />\n        </TableContainer>\n      </ContainerStyled>\n    </PermissionsContainer>\n  )\n}\n\nexport default ProcessHistory\n\nconst ContainerStyled = styled.div`\n  overflow-y: hidden;\n  overflow-x: hidden;\n  padding: 2rem;\n  height: calc(100% - 2rem);\n`\n\nconst TableContainer = styled.div`\n  display: flex;\n  margin: 0;\n  height: 100%;\n`\n"]},"metadata":{},"sourceType":"module"}